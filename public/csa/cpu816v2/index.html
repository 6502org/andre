<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="" />

<meta name="description" content="" />
<meta name="keywords" content="CSA65 65816 CPU" />
<link rev="made" href="mailto:" />
<link rel="stylesheet" title="Default" type="text/css" href="../../style-min.css" /><link rel="alternate stylesheet" title="Advanced" type="text/css" href="../../advanced.css" />
<title>CS/A 65816 V2 CPU</title></head>
<body><div id="mainbox"><a name="top" id="top"></a><div id="leftcol"><div id="menu" class="top"><div class="tophead">navigate</div><div id="filter"><form action="#"><table id="filterbox"><tr><td><input alt="menu filter" size="8" name="filter" value="filter" type="text" /></td><td><div id="cancel" class="i_cancel"> </div></td></tr></table><table id="expcol"><tr><td><div id="expand" class="i_expand"> </div></td><td><div id="collapse" class="i_collapse"> </div></td></tr></table></form></div>
<div id="mtree">
<a id="m_homepage" href="../../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><div class="i_dir">&nbsp;</div><a href="../../petindex/index.html">CBM PETindex</a>

</li>
<li class="dir" id="m_cbmhw"><div class="i_dir">&nbsp;</div><a href="../../cbmhw/index.html">CBM hardware and mods</a>

</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_65k"><div class="i_dir">&nbsp;</div><a href="../../65k/index.html">The 65k Project</a>

</li>
<li class="dir" id="m_csa"><div class="i_dir">&nbsp;</div><a href="../../csa/index.html">CS/A65 Caspaer and Gecko computer</a>

<ul class="menu1" >
<li><div class="i_file">&nbsp;</div><a href="../memmap.html">Memory Map</a></li>
<li class="separator">Specifications</li>
<li><div class="i_file">&nbsp;</div><a href="../bus.html">Bus V1.0</a></li>
<li><div class="i_file">&nbsp;</div><a href="../bus-1.1.html">Bus V1.1</a></li>
<li class="separator">Main boards</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu/index.html">CS/A65 CPU</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../bios/index.html">CS/A65 BIOS </a>
</li>
<li><div class="i_file">&nbsp;</div><a href="index.html" class="mcurrent">65816 CPU V2</a>
</li>
<li class="dir" id="m_csa_petcpu"><div class="i_dir">&nbsp;</div><a href="../petcpu/index.html">64k PET CPU</a>

</li>
<li class="dir" id="m_csa_gecko"><div class="i_dir">&nbsp;</div><a href="../gecko/index.html">Gecko</a>

</li>
<li><div class="i_file">&nbsp;</div><a href="../auxcpu/index.html">Auxiliary CPU</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../pwr/index.html">Power Supply</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../term/index.html">Bus terminators</a>
</li>
<li class="separator">I/O boards</li>
<li><div class="i_file">&nbsp;</div><a href="../vdc/index.html">Video board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../petio/index.html">CBM PET I/O</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../etholi/index.html">Ethernet</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../usb/index.html">USB</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../shug/index.html">PC floppy</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../drvio/index.html">DRVIO floppy and IEC</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../duart/index.html">Double UART (RS232)</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../scsi/index.html">SCSI/I2C board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../spi/index.html">MMC/SD-Card</a>
</li>
<li class="separator">Special purpose</li>
<li class="dir" id="m_csa_blitter"><div class="i_dir">&nbsp;</div><a href="../blitter/index.html">Block transfer</a>

</li>
<li><div class="i_file">&nbsp;</div><a href="../ramdisk/index.html">SIMM RAMDisk</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../copro/index.html">Coprocessor board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../cpuemu/index.html">Emulate a 6502</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../keyemu/index.html">Emulate a keyboard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../viaproto/index.html">VIA prototyping</a>
</li>
<li class="separator">Deprecated boards</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu816/index.html">65816 CPU V1</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu65b/index.html">64k CPU</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../key/index.html">Keyboard and RS232</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../iec/index.html">IEEE488 and CBM IEC</a>
</li>
<li class="separator">Other links</li>
<li><div class="i_file">&nbsp;</div><a href="../gallery/index.html">Gallery</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../emu/index.html">VICE emu of CS/A65</a>
</li>
<li><div class="i_link">&nbsp;</div><a href="../../cbmhw/c64csa/index.html">C64 CS/A adapter</a></li>
<li><div class="i_link">&nbsp;</div><a href="../../cbmhw/petcsa/index.html">PET CS/A adapter</a></li>
</ul>
</li>
<li class="dir" id="m_adv65"><div class="i_dir">&nbsp;</div><a href="../../adv65/index.html">Advanced 6502</a>

</li>
<li class="dir" id="m_hwinfo"><div class="i_dir">&nbsp;</div><a href="../../hwinfo/index.html">ICs and Standards Info</a>

</li>
<li class="dir" id="m_mischw"><div class="i_dir">&nbsp;</div><a href="../../mischw/index.html">Other hardware (e.g. tools)</a>

</li>
<li class="separator">Software</li>
<li><div class="i_file">&nbsp;</div><a href="../../osa/index.html">GeckOS operating system</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../lib6502/index.html">Lib6502 standard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../o65/index.html">O65 file format</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><div class="i_dir">&nbsp;</div><a href="../../icapos/index.html">Computer/OS Architecture</a>

</li>
<li class="dir" id="m_icaphw"><div class="i_dir">&nbsp;</div><a href="../../icaphw/index.html">6502 Hardware Bits</a>

</li>
<li class="separator">Misc</li>
<li><div class="i_file">&nbsp;</div><a href="../../contact.html">Contact</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../sneak.html">Sneak preview</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../design.html">Web design</a></li>
</ul>


</div>
		</div><div class="top" id="browser"><div class="tophead">browser</div><div>
			Site has been tested with a number of browsers and systems. Javascript required for advanced menu, but degrades gracefully without Javascript. IE6 not supported anymore!
			</div></div></div><div id="rightcol"><div class="top" id="google"><div class="tophead">search</div><div><form method="get" action="http://www.google.com/search" target="_blank"><input alt="search parameters" type="text" name="q" size="10" maxlength="255" value="" /><input class="advbutton" type="submit" value="Search my site" /><br />(Google, in new window)
	                        <input type="hidden" name="sitesearch" value="www.6502.org/users/andre" /></form></div></div><div class="top" id="share"><div class="tophead">share</div><div><div id="socialshareprivacy"></div></div></div><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow my 8-bit tweets on<br /><a class="extlink" target="_blank" href="https://twitter.com/#!/search/realtime/afachat%20%238bit">Twitter</a><br /> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">Hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../../cbmhw/ryofat40/index.html">Commodore PET replica</a></p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../../adv65/pet816/index.html">10&nbsp;MHz 6502 CPU replacement board</a></p>
<p>Interested in electronics design? Look at the <a href="../../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>
<p>Want 64bit? - pimp the 6502 with the <a href="../../65k/index.html">65k processor design!</a></p>

		</div></div></div><div id="midcol"><div class="top" id="ie6warn">
You are using an old MS Internet Explorer as browser. This version is not supported anymore. Please use a 
more modern browser, like Internet Explorer 8 or later, 
<a target="_blank" class="extlink" href="http://www.firefox.com">Firefox</a>,
<a target="_blank" class="extlink" href="http://www.google.com/chrome">Google Chrome</a>, or
<a target="_blank" class="extlink" href="http://www.opera.com">Opera</a>.
</div><div class="top" id="content"><div id="minmax"></div>
<div id="breadcrumbs">
<a href="../../index.html">Homepage</a>
&gt;&gt; <a href="../index.html">CS/A65 Caspaer and Gecko computer</a>&gt;&gt;  65816 CPU V2</div>
<h1>CS/A 65816 V2 CPU</h1>

<div class="overview"><p>This board implements a 65816 CPU board for the CS/A computer.
		The CPU runs on eight times the bus clock speed, i.e. for a 
		1 MHz bus, the CPU runs on 8 MHz. Currently only 1 MHz bus/8 MHz CPU
		is supported though.
		It features up to 1.5 MByte fast RAM that is used at CPU speed, and 512k ROM.
		To access the ROM, the bus memory or the I/O, the CPU is slowed down to bus
		clock speed with the RDY pin.
		</p><p>
		This board uses a <a href="../../icaphw/xilinx/index.html">Xilinx CPLD</a> as the main
	        logic element. Basically all of the logic shown in the <a href="../cpu816/index.html">version 1 board</a>
		has been moved into this chip. If you don't have access to a programmer, or don't want to use a CPLD
		you can still look at the <a href="../cpu816/index.html">version 1 board</a> - it only has a GAL 
		for timing reasons.
		</p><p>
		CPLDs and other programmable logic is even today already mostly available in 3.3V or even lower supply
		voltages and SMD packaging. I used a Xilinx XC9572 CPLD, a 5V version which is still available 
		(probably as "new old stock") in PLCC packages. Although - after looking again into the WDC datasheets -
		I could have probably done a 3.3V design with voltage converters to the bus 
		(the 65816 runs with 3.3V, although a bit slower).
                <div class="rightimg">
                                <a href="csa_fastloop.png"><img width="200px" src="csa_fastloop.png" /></a><br />Screenshot of a timing measurement. On the top of the screen you see the result of the original speed, then copying (SYS33792 where I assembled the test to), then POKEing the control register to fast speed and measuring again.
	                </div>
		And even as I am getting used to soldering SMDs, I still think of it as a feature, that except 1MByte of RAM 
		the board is in classic through-hole technique, and can be run without SMD parts.
		</p><p>
		With this board I was able to achieve a <b>speed increase of over 8 times</b> compared to the 1MHz system :-)
		</p>
	
</div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="news" id="news">News:</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul class="news"><li><div> </div><small>2010-12-22</small>
           	The schematics and VHDL is updated and fixed. It is now compatible to the
           	<a href="../../adv65/pet816/index.html">PET816</a> board (with the exception of the speed register), 
           	so the same programs run on both systems. 
           </li></ul></div></div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul><li><a href="#making">Making of</a></li><li><a href="#memmap">Memory Map</a></li><li><a href="#control">Control port</a></li><li><a href="#future">Notes and possible future enhancements</a></li><li><a href="#driver">Driver</a></li><li style="list-style-type:none;"><ul><li><a href="#driver1">Simple test suite</a></li></ul></li><li><a href="#boards">Board Revisions</a></li><li style="list-style-type:none;"><ul><li><a href="#board1">2.0E</a> (prototype)</li><li><a href="#board2">2.0C</a> (deprecated)</li><li><a href="#board3">2.0B</a> (deprecated)</li><li><a href="#board4">2.0A</a> (deprecated)</li></ul></li><li><a href="#blkdiag">Block diagram</a></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="making" id="making">Making of</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>
			When building the <a href="../cpu816/index.html">version 1 board</a> I found that it is very
			tedious replacig parts, cutting traces and soldering new connections each time I had to test
			something. So I decided to try out more integrated programmable logic (more integrated than a GAL
			that is). 
			</p><p>
                <div class="rightimg">
                                <a href="csa_cpu816-v2.0b.png"><img width="200px" src="csa_cpu816-v2.0b.png" /></a><br />The 65816 CPU board version 2 with the PLCC CPLD logic chip.
	                </div>
Now that the version 1 board was working, I decided to use this as a starting point 
			and simply recreate the same schematics basically in the CPLD. As a programming language
			I decided not to use the schematics, but go for VHDL.
			</p><p>
			This resulted in the CPLD programming environment giving some warnings about latches it
			detected, as well as combinatorial feedback loops. But yes, that's how the version 1 works,
			using well-placed and controlled flip-flops, and also feedback loops. So I ignored the 
			warnings.
			</p><p>
			Using a CPLD allowed me to introduce a few more features:
			<ul>
				<li>A control port to control the memory mapping (something which was very crudely done by accessing RAM3 on the version 1 board</li>
				<li>A more consistent memory mapping, mapping the RAM0 "under" the original 64k for write accesses</li>
				<li>Write protection for fast RAM in the upper ranges of the lowest 64k - so you could replace/test other ROMs</li>
				<li>512k in-system-programmable Flash ROM, the lower 64k of which can be used to boot the system (jumperable)</li>
			</ul>
			The control port currently is only writeable. I planned to make it read-write, but here either
			my lack of VHDL knowledge or even technical restrictions of the used CPLD come in the way.
			Even though I set the "inout" data pins to high impedance, they were still pulling the data bus
			low. Which made the CPU doing BRKs one after the other, which was easily detectable by three
			write cycles in a row...
			</p><p>
			After finding this issue, the rest of the timing issues were solved quickly by comparing what
			I had in the CPLD with what was working in the version 1 board.
			</p><p>
			There is one caveat though - the 2Phi2 generation is using more time in the CPLD so that it
			is delayed compared to the Phi2 signal. Using a 74LS14 instead of the 74ALS14 inverter as I had before
			delayed the bus Phi2 signal appropriately. The next step in the desig will be to integrate the
			clock counter and the inverter into the CPLD as well, then generating synchronized clocks,
			which should make the problems go away. But the first goal was the reproduction of the version 1
			board with a CPLD and it worked :-)
			</p><p>
			By the way, the PET bell tone already becomes noticably faster even if you only speed up the 
			bogus 6502 CPU cycles (which results in them not showing on the 1MHz bus).
			</p>
		</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="memmap" id="memmap">Memory Map</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c">
			<p>The memory map is relatively simple, only the lowest 64k are more complicated:
				<table class="content" border="1"><tr><th>Memory area</th><th>Range</th><th>no BOOTROM, no SLOW64k</th><th>BOOTROM, no SLOW64k</th><th>no BOOTROM, SLOW64k</th><th>Comments</th></tr>
					<tr><th>$000000-$007fff</th><td>32k</td><td>FastRAM</td><td>BootROM</td><td>CS/A bus</td><td>Writes always also go to FastRAM (write through)</td></tr>
					<tr><th>$008000-$0087ff</th><td>2k</td><td colspan="3">CS/A bus (video memory) $18000-$187ff</td><td>Note: If the FASTVREAD control register bit is set, only writes go to the system bus (and write through to FastRAM), but reads only go to FastRAM.</td></tr>
					<tr><th>$008800-$00e7ff</th><td>24k</td><td>FastRAM</td><td>BootROM</td><td>CS/A bus</td><td>Writes always also go to FastRAM (write through)</td></tr>
					<tr><th>$00e800-$00efff</th><td>2k</td><td colspan="3">CS/A bus (io)</td><td>Writes always also go to FastRAM (write through)</td></tr>
					<tr><th>$00f000-$00ffff</th><td>4k</td><td>FastRAM</td><td>BootROM</td><td>CS/A bus</td><td>Writes always also go to FastRAM (write through)</td></tr>
					<tr><th>$010000-$17ffff</th><td>1472k (3*512k-64k)</td><td colspan="3">FastRAM</td></tr>
					<tr><th>$180000-$dfffff</th><td></td><td colspan="3">---</td></tr>
					<tr><th>$e00000-$efffff</th><td>1024k</td><td colspan="3">CS/A bus (memory)</td></tr>
					<tr><th>$f00000-$f7ffff</th><td>512k</td><td colspan="3">FastRAM mirror of $000000-$07ffff</td></tr>
					<tr><th>$f80000-$ffffff</th><td>512k</td><td colspan="3">ROM</td></tr>
				</table>
				The memory map is controlled by two bits, BOOTROM and SLOW64k, in the control register 
				(see below). When BOOTROM is set, then the lowest 64k of the system ROM on the CPU board
				are mapped into the lowest 64k CPU address space - except video and I/O. BOOTROM is initialized
				by a jumper, so you can easily change the boot procedure. If SLOW64K is set,
				then the lowest 64k are mapped to the CS/A bus - again except video and I/O. 
				When BOOTROM and SLOW64K are both set, BOOTROM takes precedence.
				</p><p>
				Video and I/O are always mapped to the CS/A bus. The video area is mapped in the 
				second 64k on the CS/A bus, where normally the VDC card with its video memory is located.
				I/O is mapped on the /IOSEL select line on the CS/A bus.
		</p>
		</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="control" id="control">Control port</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>This section describes the control port for the CPU board.
				The port is located at $EBFF in the I/O area and is (currently) write-only
				(It can be relocated to $EFFF via jumper, but due to incompatibilities with my
				CS/A setup I decided to use $EBFF as standard location).
				The different bits are used as described in this table:
				<table border="1" class="content" width="80%">
					<tr><th>Bit</th><th>Value</th><th>Name</th><th>Description</th><th>Init value</th><th>Notes</th></tr>
					<tr><td>7</td><td>128</td><td>PRGROM</td><td>When set, allows write access to the built-in ROM. Note that specific algorithms are required to do the programming, random access does not work</td><td>0</td></tr>
					<tr><td>6</td><td>64</td><td>BOOTROM</td><td>When set, the lowest 64k CPU address space are mapped to the built-in ROM (except video and I/O, see above)</td><td>Bootrom jumper</td><td>Note this allows to unmap the system ROM after boot by setting this bit to 0. Only the initial value is taken from the Bootrom jumper.</td></tr>
					<tr><td>5</td><td>32</td><td>SLOW64K</td><td>When set, the lowest 64k CPU address space are mapped to the CS/A bus (except video and I/O, see above)</td><td>1</td></tr>
					<tr><td>4</td><td>16</td><td>SLOWCLK</td><td>When set, use slow access even on fast memory</td><td>1</td></tr>
					<tr><td>3</td><td>8</td><td>HIDEBOGUS</td><td>When set, hide the CPU's bogus cycles - as indicated by VPA and VDA both 0 - from the system bus when possible.</td><td>1</td></tr>
					<tr><td>2</td><td>4</td><td>FASTVREAD</td><td>When set, read the video RAM area from the fast RAM (writes still go to the slow system RAM)</td><td>1</td></tr>
					<tr><td>1,0</td><td>2,1</td><td>WPROTECT</td><td>Write protect upper parts of the lowest 64k of FastRAM 
						<table><tr><th>Value</th><th>Protected Area</th></tr>
							<tr><td>00</td><td>None</td></tr>
							<tr><td>01</td><td>$A000-$FFFF</td></tr>
							<tr><td>10</td><td>$C000-$FFFF</td></tr>
							<tr><td>11</td><td>$E000-$FFFF</td></tr>
						</table>
					</td><td>00</td></tr>
				</table>
			</p>
		</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="future" id="future">Notes and possible future enhancements</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>
				This section describes some notes and possible future enhancements of the board.
				Of the possible enhancements from version 1, actually only the too small GAL
				has been addressed. The following are thus mostly still from the version 1 list:
		</p><p>
		1) <code>DRDY</code> is only used to disable <code>/SLOWMEM</code>, so that <code>RRDY</code>
		is only a pulse that can be sampled at the rising edge of <code>8Phi2</code> (it has been used
		for other purposes in the first - faulty - design). Maybe it can be replaced with <code>RDY</code>.
		</p><p>
		2) The GAL has been replaced by a CPLD - ok!
		</p><p>
		3) Similar to the PET 8296 the whole timing generation could be <quote>modernized</quote>.
		The 8296 uses a '163 synchronous timer, the input of which is given to a small PROM,
		and the output of that PROM again is clocked by the 16MHz clock. This results in absolutely
		synchronous clock signals, which makes timing much easier. In the current design 
		we would need a register clocked at <code>8Phi2</code> and another one at <code>/8Phi2</code>.
		This could probably be done easily in the CPLD.
		</p><p>
		4) Currently <code>BRDY</code>, the CS/A bus <code>RDY</code> line is sampled at the end of
		<code>Q7</code>, when <code>XQ7</code> is sampled by <code>8Phi2</code>, 65ns before 
		<code>Phi2</code> goes low. This may or may not be a problem for slow memory that uses
		<code>RDY</code>.
		</p><p>
		5) The control port was planned to be read-write, but I only managed to make it write only.
		This could be fixed.
		</p>
		</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="driver" id="driver">Driver</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><h3><a name="driver1" id="driver1">Simple test suite</a></h3>These tests test the basic functionality of the board, and also do some timing
			measurement to actually see if the access is fast or not.
			Note that these tests are small as I had to enter them with the hex editor.
			Simply assemble them with the <code>xa</code> cross assembler with the <code>-w</code>
			switch to allow 65816 code.
                <div class="rightimg">
			<a href="csa_nobogus.png"><img width="200px" src="csa_nobogus.png" /></a><br /><b>Remove bogus accesses</b>: Screenshot of a timing measurement. On the top of the screen you see the result of the original speed, then POKEing to ignore bogus CPU accesses and measuring again. See about 14% speed increase.
	                </div>
		<table class="files">
<tr class="R1"><td><div class="i_driver"> </div></td>
<td><a href="test1.a65">test1.a65</a>(copies all of the lowest 64k but the I/O area onto itself, so it is automatically written to fast RAM )</td>
</tr></table></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="boards" id="boards">Board revisions</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><h3><a name="board1" id="board1">Version: 2.0E</a></h3>
<p>Status: prototype</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			This version adds a jumper to define the control port address.
			Also the new <code>/ROMOE</code> signal enables writing the ROM in-system...
		</td></tr>
<tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			The layout has not been tested, I fixed my 2.0A version up to 2.0E.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0e.sch">csa_cpu816-v2.0e.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0e-sch.png">csa_cpu816-v2.0e-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0e.brd">csa_cpu816-v2.0e.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0e-brd.png">csa_cpu816-v2.0e-brd.png</a></td>
</tr>
<tr class="R1"><td><div class="i_parts"> </div></td>
<td><a href="csa_cpu816-v2.0e.parts">csa_cpu816-v2.0e.parts</a></td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csacpu816-v2.0e.vhd">csacpu816-v2.0e.vhd</a>(CPLD VHDL source)</td>
</tr>
<tr class="R1"><td><div class="i_logic"> </div></td>
<td><a href="csacpu816-v2.0e.ucf">csacpu816-v2.0e.ucf</a>(CPLD constraints file (pin mapping))</td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csacpu816-v2.0e.jed">csacpu816-v2.0e.jed</a>(CPLD compiled source)</td>
</tr></table>
<h3><a name="board2" id="board2">Version: 2.0C</a></h3>
<p>Status: deprecated</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			Compared to the 2.0B board it adds a protection resistor for the RDY signal. 
			When the CPU executes a WAI instruction, RDY is pulled low, this may overload the
			chip drivers, thus the resistor. Untested though.
		</td></tr>
<tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			The in-system ROM programming is not working.
		</td></tr>
<tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			The layout has not been tested, I fixed my 2.0A version up to 2.0B.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0c.sch">csa_cpu816-v2.0c.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0c-sch.png">csa_cpu816-v2.0c-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0c.brd">csa_cpu816-v2.0c.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0c-brd.png">csa_cpu816-v2.0c-brd.png</a></td>
</tr>
<tr class="R1"><td><div class="i_parts"> </div></td>
<td><a href="csa_cpu816-v2.0b.parts">csa_cpu816-v2.0b.parts</a></td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.vhd">csa_cpu816-v2.0b.vhd</a>(CPLD VHDL source)</td>
</tr>
<tr class="R1"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.ucf">csa_cpu816-v2.0b.ucf</a>(CPLD constraints file (pin mapping))</td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.jed">csa_cpu816-v2.0b.jed</a>(CPLD compiled source)</td>
</tr></table>
<h3><a name="board3" id="board3">Version: 2.0B</a></h3>
<p>Status: deprecated</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			Compared to the 2.0A board it fixes the timing bugs.
		</td></tr>
<tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			The layout has not been tested, I fixed my 2.0A version up to 2.0B.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0b.sch">csa_cpu816-v2.0b.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0b-sch.png">csa_cpu816-v2.0b-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0b.brd">csa_cpu816-v2.0b.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0b-brd.png">csa_cpu816-v2.0b-brd.png</a></td>
</tr>
<tr class="R1"><td><div class="i_parts"> </div></td>
<td><a href="csa_cpu816-v2.0b.parts">csa_cpu816-v2.0b.parts</a></td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.vhd">csa_cpu816-v2.0b.vhd</a>(CPLD VHDL source)</td>
</tr>
<tr class="R1"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.ucf">csa_cpu816-v2.0b.ucf</a>(CPLD constraints file (pin mapping))</td>
</tr>
<tr class="R0"><td><div class="i_logic"> </div></td>
<td><a href="csa_cpu816-v2.0b.jed">csa_cpu816-v2.0b.jed</a>(CPLD compiled source)</td>
</tr></table>
<h3><a name="board4" id="board4">Version: 2.0A</a></h3>
<p>Status: deprecated</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_stop"> </div></td>
<td>
			There are a few timing issues, and the main bug is that the counter counts the wrong way - so
			the phase between phi2 and 8phi2 is wrong.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_photo"> </div></td>
<td><a href=""></a>(Picture of the assembled board)</td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0a.sch">csa_cpu816-v2.0a.sch</a></td>
</tr>
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_cpu816-v2.0a-sch.png">csa_cpu816-v2.0a-sch.png</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0a.brd">csa_cpu816-v2.0a.brd</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_cpu816-v2.0a-brd.png">csa_cpu816-v2.0a-brd.png</a></td>
</tr></table>
</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="blkdiag" id="blkdiag">Block diagram</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><img src="diagram.gif" alt="block diagram" /><div class="diagcaption">Block diagram of the cpu board. 
		In principle the board is simple - the CPU is connected to the bus and the fast memory with its address and data lines.
		The '573 address latch takes the address bits 16-23 from the data bus during Phi2 low. Everything is controlled by the
		control logic - which is the most complex part here and integrated into the CPLD. RDY is used to slow down the CPU during CS/A bus access, which 
		happens at 1MHz speed instead of the 8MHz CPU speed. 
		</div></div></div><div id="contentfooter"><p>Last modified: 2010-04-11.</p>
<p>Return to <a href="../../index.html">Homepage</a></p>

</div></div></div><div id="footer"> </div></div><script type="text/javascript">myUp="../../";</script><script type="text/javascript" src="../../scripts-all.js"></script><script type="text/javascript" src="../../jquery.socialshareprivacy.js"></script><script type="text/javascript">
          jQuery(document).ready(function($){
                  if($('#socialshareprivacy').length != 0){
                            $('#socialshareprivacy').socialSharePrivacy();
                  }
          });
  </script></body></html>
