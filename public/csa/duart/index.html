<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<META NAME="keywords" CONTENT="CSA65 6502 UART">
<TITLE>CS/A65 DUART</TITLE>
<LINK REL="stylesheet" TITLE="Default" TYPE="text/css" HREF="../../style.css">
<LINK REL="alternate stylesheet" TITLE="Advanced" TYPE="text/css" HREF="../../advanced.css">
</HEAD>
<BODY>
<DIV ID="menu">
<ul><li class=homepage><a href=../../index.html>Homepage</a></li>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir"><a href="../../petindex/index.html">CBM PETindex</a></li>
<li class="dir"><a href="../../cbmhw/index.html">CBM hardware and mods</a></li>
<li class="separator">Hardware</li>
<li class="dir"><a href="../../csa/index.html">CS/A65 and Gecko computer</a></li>
<ul class="menu1" >
<li class="separator">Specifications</li>
<li class="file"><a href="../bus.html">Bus V1.0</a></li>
<li class="file"><a href="../bus-1.1.html">Bus V1.1</a></li>
<li class="separator">Main boards</li>
<li class="dir"><a href="../cpu/index.html">CS/A65 CPU</a></li>
<li class="dir"><a href="../bios/index.html">CS/A65 BIOS </a></li>
<li class="dir"><a href="../petcpu/index.html">64k PET CPU</a></li>
<li class="dir"><a href="../gecko/index.html">Gecko</a></li>
<li class="separator">I/O boards</li>
<li class="dir"><a href="../vdc/index.html">Video board</a></li>
<li class="dir"><a href="../petio/index.html">CBM PET I/O</a></li>
<li class="dir"><a href="../shug/index.html">PC floppy</a></li>
<li class="dir"><a href="../drvio/index.html">DRVIO floppy and IEC</a></li>
<li class="dir"><a href="../duart/index.html">Double UART (RS232)</a></li>

<li class="dir"><a href="../scsi/index.html">SCSI board</a></li>
<li class="separator">Special purpose</li>
<li class="dir"><a href="../copro/index.html">Coprocessor board</a></li>
<li class="dir"><a href="../cpuemu/index.html">Emulate a 6502</a></li>
<li class="dir"><a href="../keyemu/index.html">Emulate a keyboard</a></li>
<li class="separator">Deprecated boards</li>
<li class="dir"><a href="../cpu65b/index.html">64k CPU</a></li>
<li class="dir"><a href="../key/index.html">Keyboard and RS232</a></li>
<li class="dir"><a href="../iec/index.html">IEEE488 and CBM IEC</a></li>
<li class="separator">Other links</li>
<li class="dir"><a href="../gallery/index.html">Gallery</a></li>
<li class="dir"><a href="../emu/index.html">VICE emu of CS/A65</a></li>
<li class="link"><a href="../../cbmhw/c64csa/index.html">C64 CS/A adapter</a></li>
</ul>
<li class="dir"><a href="../../hwinfo/index.html">ICs and Standards Info</a></li>
<li class="separator">Software</li>
<li class="dir"><a href="../../osa/index.html">GeckOS operating system</a></li>
<li class="dir"><a href="../../lib6502/index.html">Lib6502 standard</a></li>
<li class="dir"><a href="../../o65/index.html">O65 file format</a></li>
<li class="dir"><a href="../../misc/index.html">Misc software</a></li>
<li class="separator">Knowledge Bits</li>
<li class="dir"><a href="../../icap/index.html">Articles</a></li>
<li class="separator">Misc</li>
<li class="file"><a href="../../contact.html">Contact</a></li>
</ul>
</ul>
</DIV>
<DIV ID="content">
<H1>CS/A65 DUART</H1>
<P>
	 This Dual RS232 board uses two 16550A for the two interfaces. I 
	know that there are ICs like the 16552(?) with two interfaces in 
	one chip, but when I needed it, I had the parts at home already...
	</P>
<h3>News:</h3>
<ul class="news"><li>
<small>2006-11-01</small>
                        Added driver code.
                </li></ul>
<DIV ID="toc">
<H2>Table of content</H2>
<dir>
<li><a href="#driver">Driver</a></li>
<dir><li><a href="#driver1">OS/A65 UART16550A driver</a></li></dir>
<li><a href="#boards">Board Revisions</a></li>
<dir><li>
<a href="#board1">1.0B</a> (ok)</li></dir>
</dir>
</DIV>
<H2><A NAME="driver">Driver</A></H2>
<H3><A NAME="driver1">OS/A65 UART16550A driver</A></H3>
<P>The driver consists of two files. First the
			<code>uart16550.i65</code> file contains chip
			register definitions. The file <code>ser_uart.a65</code>
			is the actual driver. This actually is a driver
			for a single UART only, but it can be linked
			into the system twice to handle both UARTs.
			The OS/A65 operating system (1.x and 2.x) uses
			a single entry point for the device, with the 
			accumulator containing the command code. 
			The entry point
			is <code>prg1</code> in this case. It branches to 
			these routines for the UART: 
			<ul>
<li>
<code>devini</code> - initialize the UART</li>
			<li>
<code>devirq</code> - interrupt routine. This 
				routine is called on every interrupt, one device
				after the other, until the irq is handled.
				The 50Hz system interrupt is last, so this
				driver uses this feature to check whether
				a new byte can be send at <code>tx2</code>.</li>
			<li>
<code>others</code> checks the other commands,
				like open, close, or handshake handling.</li>
			</ul>
			Unfortunately the driver code is pretty messy, but
			works.
		</P>
<TABLE class="files">
<TR>
<TD><IMG SRC="../../imgs/file_driver.gif" ALT="driver"></TD>
<TD>
<A HREF="ser_uart.a65">ser_uart.a65</A>(Driver code)</TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_driver.gif" ALT="driver"></TD>
<TD>
<A HREF="uart16550.i65">uart16550.i65</A>(UART register definitions)</TD>
</TR>
</TABLE>
<H2><A NAME="boards">Board revisions</A></H2>
<H3><A NAME="board1">Version: 1.0B</A></H3>
<P>Status: ok</P>
<H4>Notes</H4>
<TABLE class="notes">
<TR>
<TD class="noteicon"><IMG SRC="../../imgs/note_msg.gif" ALT="msg"></TD>
<TD>
			This is the initial version.
		</TD>
</TR>
</TABLE>
<H4>Files</H4>
<TABLE class="files">
<TR>
<TD><IMG SRC="../../imgs/file_desc.gif" ALT="desc"></TD>
<TD>
<A HREF="csaduartdesc.txt">csaduartdesc.txt</A></TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_parts.gif" ALT="parts"></TD>
<TD>
<A HREF="csaduartparts.txt">csaduartparts.txt</A></TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_schem.gif" ALT="schem"></TD>
<TD>
<A HREF="csaduart.ps.gz">csaduart.ps.gz</A></TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_schem.gif" ALT="schem"></TD>
<TD>
<A HREF="csaduart.png">csaduart.png</A></TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_schem.gif" ALT="schem"></TD>
<TD>
<A HREF="csaduart.fig">csaduart.fig</A></TD>
</TR>
<TR>
<TD><IMG SRC="../../imgs/file_photo.gif" ALT="photo"></TD>
<TD>
<A HREF="csaduart.jpg">csaduart.jpg</A>(One of the UARTs is missing)</TD>
</TR>
</TABLE>
<DIV ID="footer">
<P>Last modified: 2006-11-01.</P>
<p>Return to <a href="../../index.html">Homepage</a></p>

</DIV>
</DIV>
</BODY>
</HTML>
