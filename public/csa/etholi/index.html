<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
<meta name="author" content="André  Fachat" />

<meta name="description" content="Commodore PET CBM Ethernet board" />
<meta name="keywords" content="Commodore PET CBM Ethernet CS8900A" />
<link rev="made" href="mailto:afachat@gmx.de" />
<link rel="stylesheet" title="Default" type="text/css" href="../../style2-min.css" />
<title>Ethernet board</title></head>
<body><div id="mainbox"><a name="top" id="top"></a><div id="topsearch"><form method="get" action="http://www.google.com/search" target="_blank" autocomplete="off"><input id="searchinput" alt="search" name="q" size="10" maxlength="255" type="text" value="" /><input class="advbutton" value="Search site" type="submit" /><div id="srchprov">(by Google)</div><input name="sitesearch" value="www.6502.org/users/andre" type="hidden" /></form><div id="topfind"><div id="topprogress"></div></div></div><div id="menubox">


<div id="menu1" class="mclose">
<div id="twist1" class="twisty"></div>
<div class="hdrtxt"><a href="../../index.html">Home&nbsp;&gt;</a></div>
<ul class="nav1">
<li>
<ul class="nav2">
<li class="navhdr"><a href="../../index.html">Home</a></li>
<li><a href="../../contact.html">Contact</a></li>
<li><a href="../../design.html">Web design</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Hardware</span></li>
<li><ul class="nav2" >
<li><a href="../../ultipet/index.html">The Ultimate PET</a>
</li>
<li><a href="../../upet/index.html">The Micro-PET</a>
</li>
<li><a href="../../65k/index.html">The 65k Project</a>
</li>
<li><a href="../../pet816/index.html">PET816 Accelerator</a>
</li>
<li><a href="../../csa/index.html">CS/A65</a>
</li>
<li><a href="../../cbmhw/index.html">CBM mods</a>
</li>
<li><a href="../../spi65b/index.html">SPI65B</a>
</li>
<li><a href="../../xs1541/index.html">XS1541</a>
</li>
<li><a href="../../mischw/index.html">Other hardware</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Software</span></li>
<li><ul class="nav2" >
<li><a href="../../osa/index.html">GeckOS</a>
</li>
<li><a href="../../lib6502/index.html">lib6502 </a>
</li>
<li><a href="../../o65/index.html">o65</a>
</li>
<li><a href="../../usb65/index.html">usb65</a>
</li>
<li><a href="../../xd2031/index.html">XD2031</a>
</li>
<li><a href="../../misc/index.html">Misc</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Library</span></li>
<li><ul class="nav2" >
<li><a href="../../petindex/index.html">PETindex</a>
</li>
<li><a href="../../petindex/drives/index.html">PET drives</a>
</li>
<li><a href="../../adv65/index.html">Advanced 6502</a>
</li>
<li><a href="../../hwinfo/index.html">ICs and Standards</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Knowledge Bits</span></li>
<li><ul class="nav2" >
<li><a href="../../icapos/index.html">Computer/OS Architecture</a>
</li>
<li><a href="../../icaphw/index.html">6502 Hardware Bits</a>
</li>
<li><a href="../../emulation/index.html">Emulation</a>
</li>
</ul>
<div class="nend2"></div>
</li>
<div class="nend1"></div>
</ul>
</div>
<div id="menu2" class="%open%">
<div id="twist2" class="twisty"></div>
<div class="hdrtxt"><a href="../index.html">CS/A Computer&nbsp;&gt;</a></div>
<ul class="nav1">
<li>
<ul class="nav2">
<li class="navhdr"><a href="../index.html">CS/A Computer</a></li>
<li><a href="../memmap.html">Memory Map</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Specifications</span></li>
<li><ul class="nav2" >
<li><a href="../bus.html">Bus </a></li>
<li><a href="../bus-1.2.html">Current V1.2</a></li>
<li><a href="../bus-1.1.html">V1.1</a></li>
<li><a href="../bus-1.0.html">V1.0</a></li>
<div class="nend2"></div>
</ul>
</li>
<li><span>Main boards</span></li>
<li><ul class="nav2" >
<li><a href="../cpu/index.html">CS/A65 CPU</a>
</li>
<li><a href="../bios/index.html">CS/A65 BIOS </a>
</li>
<li><a href="../cpu816v2/index.html">65816 CPU V2</a>
</li>
<li><a href="../petcpu/index.html">64k PET CPU</a>
</li>
<li><a href="../gecko/index.html">Gecko</a>
</li>
<li><a href="../auxcpu/index.html">Auxiliary CPU</a>
</li>
<li><a href="../pwr/index.html">Power Supply</a>
</li>
<li><a href="../term/index.html">Bus terminators</a>
</li>
<li><a href="../ultrabus/index.html">Ultra-BUS backplane</a>
</li>
<li><a href="../../ultipet/index.html">&gt;Ultra-CPU</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>I/O boards</span></li>
<li><ul class="nav2" >
<li><a href="../vdc/index.html">Video board</a>
</li>
<li><a href="../petio/index.html">CBM PET I/O</a>
</li>
<li><a href="../netusb/index.html">Net/USB/SD</a>
</li>
<li><a href="../etholi/index.html">Ethernet</a>
</li>
<li><a href="../usb/index.html">USB</a>
</li>
<li><a href="../shug/index.html">PC floppy</a>
</li>
<li><a href="../drvio/index.html">DRVIO floppy and IEC</a>
</li>
<li><a href="../duart/index.html">Double UART (RS232)</a>
</li>
<li><a href="../scsi/index.html">SCSI/I2C board</a>
</li>
<li><a href="../spi/index.html">MMC/SD-Card</a>
</li>
<li><a href="../dualsid/index.html">DUAL SID sound</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Special purpose</span></li>
<li><ul class="nav2" >
<li><a href="../blitter/index.html">Block transfer</a>
</li>
<li><a href="../ramdisk/index.html">SIMM RAMDisk</a>
</li>
<li><a href="../copro/index.html">Coprocessor board</a>
</li>
<li><a href="../cpuemu/index.html">Emulate a 6502</a>
</li>
<li><a href="../keyemu/index.html">Emulate a keyboard</a>
</li>
<li><a href="../viaproto/index.html">VIA prototyping</a>
</li>
<li><a href="../ext/index.html">Bus extender</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Contributions</span></li>
<li><ul class="nav2" >
<li><a href="../contrib/index.html">Contributions</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Deprecated boards</span></li>
<li><ul class="nav2" >
<li><a href="../cpu816/index.html">65816 CPU V1</a>
</li>
<li><a href="../cpu65b/index.html">64k CPU</a>
</li>
<li><a href="../key/index.html">Keyboard and RS232</a>
</li>
<li><a href="../iec/index.html">IEEE488 and CBM IEC</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<li><span>Other links</span></li>
<li><ul class="nav2" >
<li><a href="../gallery/index.html">Gallery</a>
</li>
<li><a href="../emu/index.html">VICE emu of CS/A65</a>
</li>
<li><a href="../../cbmhw/c64csa/index.html">&gt;C64 CS/A adapter</a></li>
<li><a href="../../cbmhw/petcsa/index.html">&gt;PET CS/A adapter</a></li>
<li><a href="../../cbmhw/ryofat40/index.html">&gt;4032 clone with CS/A</a></li>
<li><a href="../../cbmhw/ryo1581/index.html">&gt;A 1581 clone with CS/A</a></li>
</ul>
<div class="nend2"></div>
</li>
<div class="nend1"></div>
</ul>
</div>
	</div><div id="midcol"><div class="top" id="content"><div id="minmax"></div>

<h1>Ethernet board</h1><p class="copyright">(C)
2010-2011 André  Fachat</p> 
<div class="overview"><p>	
	This board is an Ethernet board for the CS/A computer. It uses the Olimex Ethernet adapter
	which has a CS8900A chip on it - that chip is often used with 8 bit computers - plus physical layer
	adapter and Ethernet plug. For the board see <a href="http://www.olimex.com/dev/index.html">Olimex.com</a>,
	in the left hand menu click "Other", then "CS8900A-H".
	</p><p>
	The board thus mainly does signal voltage level translation (the Olimex adapter only comes in 
	3.3V) and address selection.
	</p><p>
	The board can be implemented in two options for the voltage level translation. One uses
	two 74LVX4245 (SMD), the other option uses a 74LVX244 (SMD), a CMOS 4050, and a 74ALS245. 
	For more details see the schematics and board. Currently only the '4245 option is tested.
	</p><p>
	As a driver I ported the uIP v1.0 TCP/IP stack to the cc65 compiler, and integrated the
	CS8900A driver from contiki v1 (which also uses uIP). 
  </p></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="news" id="news">News:</a></h2></div><div class="h2c"><ul class="news"><li><div> </div><small>2011-01-11</small>
	Published the V1.0B version with the /SBHE fix.
    </li><li><div> </div><small>2011-01-04</small>
	Published this page
    </li></ul></div></div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2></div><div class="h2c"><ul><li><a href="#driver">Driver</a></li><li style="list-style-type:none;"><ul><li><a href="#driver1">UIP PET driver</a></li></ul></li><li><a href="#boards">Board Revisions</a></li><li style="list-style-type:none;"><ul><li><a href="#board1">1.0B</a> (prototype)</li><li><a href="#board2">1.0A</a> (prototype)</li></ul></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="driver" id="driver">Driver</a></h2></div><div class="h2c"><div class="driver"><h3><a name="driver1" id="driver1">UIP PET driver</a></h3><div class="driverdesc"><p>
		This is the uIP v1.0 TCP/IP stack ported to the PET, which runs on my CS/A computer using the
		PET ROMs. </p>
                <div class="rightimg">
                        <a href="board.png"><img width="300px" src="board-small.png" /></a><br />The Ethernet board in
			the '4245 option.
                        </div>
		<p>
		The <code>pet</code> subdirectory is new and contains the Makefile to build the <code>uip</code> binary,
		which is a CBM PET program that can be loaded with LOAD and started with RUN. In the main.c the 
		ethernet driver is configured with the IP address. Also there are some diagnostic asm statements,
		to increase a PET video memory location when executed, kind of a debug heartbeat.
		</p><p>
		The CS8900A is configured to be used at $E8C0. The board can be jumpered to $E8D0 as well.
		</p><p>
		In the uIP driver code provided here I have only implemented the "hello world" program as included in the 
		uIP stack. That however should give you an indication how to implement your own programs. 
		</p>
                </div><div class="driverfiles"><table class="files">
<tr class="R1"><td><div class="i_driver"> </div></td>
<td><a href="uip-1.0+pet.tar.gz">uip-1.0+pet.tar.gz</a>(Ported uIP stack for the PET)</td>
</tr>
<tr class="R0"><td><div class="i_driver"> </div></td>
<td><a href="uip-pet.diff.gz">uip-pet.diff.gz</a>(Diff of the Ported uIP stack to uIP v1.0)</td>
</tr></table></div><div class="driverend"></div></div></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="boards" id="boards">Board revisions</a></h2></div><div class="h2c"><div class="rev"><h3><a name="board1" id="board1">Version: 1.0B</a></h3>
<div class="revdesc"><p>Status: prototype</p>
</div><div class="revnotes"><h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			(2012-01-02) If you have power supply problems, you can place a 47u tantal capacitor underneath
			the Olimex module.
                </td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			Silly me, I forgot the pullup on /SBHE. That fixes the initialization problem. Driver stays the same.
                </td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			This board has been successfully tested with both implementation options for the level translators.
                </td></tr>
</table></div><div class="revfiles"><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_etholi-v1.0b.sch">csa_etholi-v1.0b.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_etholi-v1.0b-sch.png">csa_etholi-v1.0b-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_etholi-v1.0b.brd">csa_etholi-v1.0b.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_etholi-v1.0b-brd.png">csa_etholi-v1.0b-brd.png</a></td>
</tr></table>
</div><div class="revend"></div></div><div class="rev"><h3><a name="board2" id="board2">Version: 1.0A</a></h3>
<div class="revdesc"><p>Status: prototype</p>
</div><div class="revnotes"><h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			There still seems to be some kind of initialization problem. The uIP driver from above only
			works when system has been reset once after power up (no matter if the driver has been loaded
			before the reset or not).
                </td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			This board has been successfully tested with both implementation options for the level translators.
                </td></tr>
</table></div><div class="revfiles"><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_etholi-v1.0a.sch">csa_etholi-v1.0a.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_etholi-v1.0a-sch.png">csa_etholi-v1.0a-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_etholi-v1.0a.brd">csa_etholi-v1.0a.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_etholi-v1.0a-brd.png">csa_etholi-v1.0a-brd.png</a></td>
</tr></table>
</div><div class="revend"></div></div></div></div><hr />
<p>Return to <a href="../../index.html">Homepage</a></p>

  Last modified: 
2012-01-04
	</div></div><div id="rightcol"><div class="top" id="twitter"><div class="tophead">follow</div><div><p>Follow my 8-bit tweets on
		            <a class="extlink" target="_blank" href="https://twitter.com/#!/search/realtime/afachat%20%238bit">Twitter</a> (In new window)</p></div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../../upet/index.html">Micro-PET</a> or a Multi-board <a href="../../cbmhw/ryofat40/index.html">Commodore 4032</a> replica</p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../../pet816/index.html">10&nbsp;MHz 6502 CPU accelerator board</a></p>
<p>Interested in electronics design? Look at the <a href="../../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>
<p>Want 64bit? - pimp the 6502 with the <a href="../../65k/index.html">65k processor design!</a></p>

		</div></div></div><div id="footer"> </div></div><script type="text/javascript">myUp="../../";</script><script type="text/javascript" src="../../scripts2-all.js"></script></body></html> 

