<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="" />

<meta name="description" content="" />
<meta name="keywords" content="CSA65 6502 CPU" />
<link rev="made" href="mailto:" />
<link rel="stylesheet" title="Default" type="text/css" href="../../style-min.css" /><link rel="alternate stylesheet" title="Advanced" type="text/css" href="../../advanced.css" />
<title>CS/A65 Auxiliary CPU</title></head>
<body><div id="mainbox"><a name="top" id="top"></a><div id="leftcol"><div id="menu" class="top"><div class="tophead">navigate</div><div id="filter"><form action="#"><table id="filterbox"><tr><td><input alt="menu filter" size="8" name="filter" value="filter" type="text" /></td><td><div id="cancel" class="i_cancel"> </div></td></tr></table><table id="expcol"><tr><td><div id="expand" class="i_expand"> </div></td><td><div id="collapse" class="i_collapse"> </div></td></tr></table></form></div>
<div id="mtree">
<a id="m_homepage" href="../../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><div class="i_dir">&nbsp;</div><a href="../../petindex/index.html">CBM PETindex</a>
</li>
<li class="dir" id="m_cbmhw"><div class="i_dir">&nbsp;</div><a href="../../cbmhw/index.html">CBM hardware and mods</a>
</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_65k"><div class="i_dir">&nbsp;</div><a href="../../65k/index.html">The 65k Project</a>
</li>
<li class="dir" id="m_csa"><div class="i_dir">&nbsp;</div><a href="../../csa/index.html">CS/A65 Caspaer and Gecko computer</a>
<ul class="menu1" >
<li><div class="i_file">&nbsp;</div><a href="../memmap.html">Memory Map</a></li>
<li class="separator">Specifications</li>
<li><div class="i_file">&nbsp;</div><a href="../bus.html">Bus V1.0</a></li>
<li><div class="i_file">&nbsp;</div><a href="../bus-1.1.html">Bus V1.1</a></li>
<li class="separator">Main boards</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu/index.html">CS/A65 CPU</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../bios/index.html">CS/A65 BIOS </a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu816v2/index.html">65816 CPU V2</a>
</li>
<li class="dir" id="m_csa_petcpu"><div class="i_dir">&nbsp;</div><a href="../petcpu/index.html">64k PET CPU</a>
</li>
<li class="dir" id="m_csa_gecko"><div class="i_dir">&nbsp;</div><a href="../gecko/index.html">Gecko</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="index.html" class="mcurrent">Auxiliary CPU</a>

</li>
<li><div class="i_file">&nbsp;</div><a href="../pwr/index.html">Power Supply</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../term/index.html">Bus terminators</a>
</li>
<li class="separator">I/O boards</li>
<li><div class="i_file">&nbsp;</div><a href="../vdc/index.html">Video board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../petio/index.html">CBM PET I/O</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../etholi/index.html">Ethernet</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../usb/index.html">USB</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../shug/index.html">PC floppy</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../drvio/index.html">DRVIO floppy and IEC</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../duart/index.html">Double UART (RS232)</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../scsi/index.html">SCSI/I2C board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../spi/index.html">MMC/SD-Card</a>
</li>
<li class="separator">Special purpose</li>
<li><div class="i_file">&nbsp;</div><a href="../blitter/index.html">Block transfer</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../ramdisk/index.html">SIMM RAMDisk</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../copro/index.html">Coprocessor board</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../cpuemu/index.html">Emulate a 6502</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../keyemu/index.html">Emulate a keyboard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../viaproto/index.html">VIA prototyping</a>
</li>
<li class="separator">Deprecated boards</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu816/index.html">65816 CPU V1</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../cpu65b/index.html">64k CPU</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../key/index.html">Keyboard and RS232</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../iec/index.html">IEEE488 and CBM IEC</a>
</li>
<li class="separator">Other links</li>
<li><div class="i_file">&nbsp;</div><a href="../gallery/index.html">Gallery</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../emu/index.html">VICE emu of CS/A65</a>
</li>
<li><div class="i_link">&nbsp;</div><a href="../../cbmhw/c64csa/index.html">C64 CS/A adapter</a></li>
<li><div class="i_link">&nbsp;</div><a href="../../cbmhw/petcsa/index.html">PET CS/A adapter</a></li>
</ul>
</li>
<li class="dir" id="m_adv65"><div class="i_dir">&nbsp;</div><a href="../../adv65/index.html">Advanced 6502</a>
</li>
<li class="dir" id="m_hwinfo"><div class="i_dir">&nbsp;</div><a href="../../hwinfo/index.html">ICs and Standards Info</a>
</li>
<li class="dir" id="m_mischw"><div class="i_dir">&nbsp;</div><a href="../../mischw/index.html">Other hardware (e.g. tools)</a>
</li>
<li class="separator">Software</li>
<li><div class="i_file">&nbsp;</div><a href="../../osa/index.html">GeckOS operating system</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../lib6502/index.html">Lib6502 standard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../o65/index.html">O65 file format</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><div class="i_dir">&nbsp;</div><a href="../../icapos/index.html">Computer/OS Architecture</a>
</li>
<li class="dir" id="m_icaphw"><div class="i_dir">&nbsp;</div><a href="../../icaphw/index.html">6502 Hardware Bits</a>
</li>
<li class="separator">Misc</li>
<li><div class="i_file">&nbsp;</div><a href="../../contact.html">Contact</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../sneak.html">Sneak preview</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../design.html">Web design</a></li>
</ul>

</div>
		</div><div class="top" id="browser"><div class="tophead">browser</div><div>
			Site has been tested with a number of browsers and systems. Javascript required for advanced menu, but degrades gracefully without Javascript. IE6 not fully supported anymore!
			</div></div></div><div id="rightcol"><div class="top" id="google"><div class="tophead">search</div><div><form method="get" action="http://www.google.com/search" target="_blank"><input alt="search parameters" type="text" name="q" size="10" maxlength="255" value="" /><input class="advbutton" type="submit" value="Search my site" /><br />(Google, in new window)
	                        <input type="hidden" name="sitesearch" value="www.6502.org/users/andre" /></form></div></div><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow my 8-bit tweets on<br /><a target="_blank" href="http://search.twitter.com/search?q=&amp;ands=&amp;phrase=&amp;ors=&amp;nots=&amp;tag=8bit&amp;lang=all&amp;from=afachat&amp;to=&amp;ref=&amp;near=&amp;within=15&amp;units=mi&amp;since=&amp;until=&amp;rpp=15">Twitter</a><br /> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">Hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../../cbmhw/ryofat40/index.html">Commodore PET replica</a></p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../../adv65/pet816/index.html">10&nbsp;MHz 6502 CPU replacement board</a></p>
<p>Interested in electronics design? Look at the <a href="../../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>
<p>Want 64bit? - pimp the 6502 with the <a href="../../65k/index.html">65k processor design!</a></p>

		</div></div></div><div id="midcol"><div class="top" id="ie6warn">
You are using an old MS Internet Explorer as browser. This version is not supported anymore. Please use a 
more modern browser, like Internet Explorer 8 or later, 
<a target="_blank" class="extlink" href="http://www.firefox.com">Firefox</a>,
<a target="_blank" class="extlink" href="http://www.google.com/chrome">Google Chrome</a>, or
<a target="_blank" class="extlink" href="http://www.opera.com">Opera</a>.
</div><div class="top" id="content"><div id="minmax"></div>
<div id="breadcrumbs">
<a href="../../index.html">Homepage</a>
&gt;&gt; <a href="../index.html">CS/A65 Caspaer and Gecko computer</a>&gt;&gt;  Auxiliary CPU</div>
<h1>CS/A65 Auxiliary CPU</h1>

<div class="overview"><p>This board implements an auxiliary processor for the
		CS/A65 bus system. The auxiliary CPU watches the bus 
		error conditions signaled via the NOEXEC (no execution allowed,
		which is checked with the CPU's SYNC line), WPROT (write protection)
		and NOTMAPD (page not mapped) lines, and in such a case takes over the bus
		to resolve the problem.
		</p><p>
		The auxiliary CPU does not have a full MMU, and
		it does not have own memory either. It uses
		32k on the bus for the top and bottom
		16k of its address space. Two areas of 4k can be mapped 
		similar to the
		MMU, and two areas of 4k are set for the bus I/O and the 
		secondary bus I/O.
		</p><p>
		The auxiliary board has a separate bus socket where
		another CS/A65 I/O board can be plugged in that the 
		processor can handle independently from the bus I/O.
		</p>
	
</div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="news" id="news">News:</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul class="news"><li><div> </div><small>2006-12-27</small>
                        Published the board.
                </li></ul></div></div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul><li><a href="#driver">Driver</a></li><li style="list-style-type:none;"><ul><li><a href="#driver1">AUXCPU test suite</a></li></ul></li><li><a href="#boards">Board Revisions</a></li><li style="list-style-type:none;"><ul><li><a href="#board1">1.0C</a> (ok)</li><li><a href="#board2">1.0B</a> (prototype with bugs)</li></ul></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="driver" id="driver">Driver</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><h3><a name="driver1" id="driver1">AUXCPU test suite</a></h3><p>This test suite contains nine tests that for the
			auxcpu board:
			</p><p>
			The tests run in a <a href="../index.html#caspaer">Caspaer</a> setup, but with Commodore PET ROMs, as described in <a href="../../cbmhw/ryofat40/index.html">Roll-Your-Own-Fat40</a>.
			This way the operating system does not fiddle around
			with the MMU registers necessary for the test.
                        </p>
			<ul>
			<li>auxcpu1: Tests basic functionality. Loads a program
				for the auxcpu, and starts it with the "external trigger"
				functionality. Auxcpu flashes the BIOS board LED
				and the DRVIO LEDs if the DRVIO board is plugged into
				the secondary bus of the auxcpu. Does not give control
				back to the maincpu.</li>
			<li>auxcpu2: Same as auxcpu1, only instead of static RAM from
				the BIOS board, uses dRAM from the VDC board, to
				see if the timing is ok there too.</li>
			<li>auxcpu3: blinks the LEDs as well, but after each flash the
				control is given back to the maincpu that does the 
				actual wait loop until triggering the next flash in 
				the auxcpu.</li>
			<li>auxcpu4: Tests the write protect (WPROT) handling. Maps a page
				as write protected, and writes to it. The auxcpu prints
				the fault address on the screen.</li>
			<li>auxcpu4a: Same as auxcpu4, only that the screen memory 
				is mapped using not the MAPRAM, but MAP0 register.</li>
			<li>auxcpu5: Tests the NOEXEC handling. Maps a page
				as NOEXEC, and jumps to it. The auxcpu prints
				the fault address on the screen and lets the maincpu return.</li>
			<li>auxcpu6: Tests the "not mapped" handling. Maps a page
				as not mapped, and reads it. The auxcpu prints
				the fault address on the screen.</li>
			<li>auxcpu7: Combines NOEXEC, WPROT, and NOTMAPD handling Maps a page
				as not mapped, no execute, and write protected, and accesses it. 
				The auxcpu prints the fault address on the screen.</li>
			<li>auxcpu8: Tests the trace feature. Enables trace and prints the next
				five opcode addresses and opcodes on the screen.
				</li>
			<li>auxcpu9: Same as auxcpu7, only that the auxcpu also triggers
				an intterupt for the maincpu.</li>
			</ul>
                <table class="files">
<tr class="R1"><td><div class="i_driver"> </div></td>
<td><a href="auxcpu.tar.gz">auxcpu.tar.gz</a></td>
</tr>
<tr class="R0"><td><div class="i_photo"> </div></td>
<td><a href="trace.jpg">trace.jpg</a>(Sample trace output (The first poke is specific for my setup - I'm still using an old charrom - you can ignore it))</td>
</tr>
<tr class="R1"><td><div class="i_memmap"> </div></td>
<td><a href="memsetup.gif">memsetup.gif</a>(This shows the memory mapping used in the test cases.)</td>
</tr></table></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="boards" id="boards">Board revisions</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><h3><a name="board1" id="board1">Version: 1.0C</a></h3>
<p>Status: ok</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_warn"> </div></td>
<td>
			In this board the schematics has been tested, the layout has not been tested, though.
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			This board has been tested in a test 
			setup. The driver above contains the test
			programs.
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			The board itself consists of two boards, where
			the smaller one is piggy-backed on top of the
			main Euro-card-sized board. The smaller one
			is called the "addon" board.
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			The two timing diagrams show the timing of various signals on
			the schematics during the operation. They should help in understanding the
			boards.
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>Please note that it still uses the v1.0b version of the addon board.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_desc"> </div></td>
<td><a href="csaauxcpudesc-v1.0c.txt">csaauxcpudesc-v1.0c.txt</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu-v1.0c-sch.png">csa_auxcpu-v1.0c-sch.png</a></td>
</tr>
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu-v1.0c.sch">csa_auxcpu-v1.0c.sch</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b-sch.png">csa_auxcpu_addon-v1.0b-sch.png</a>(The addon board)</td>
</tr>
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b.sch">csa_auxcpu_addon-v1.0b.sch</a>(The addon board)</td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu-v1.0c-brd.png">csa_auxcpu-v1.0c-brd.png</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu-v1.0c.brd">csa_auxcpu-v1.0c.brd</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b-brd.png">csa_auxcpu_addon-v1.0b-brd.png</a>(The addon board)</td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b.brd">csa_auxcpu_addon-v1.0b.brd</a>(The addon board)</td>
</tr>
<tr class="R0"><td><div class="i_photo"> </div></td>
<td><a href="auxcpubrds.jpg">auxcpubrds.jpg</a>(The complete auxcpu board.)</td>
</tr>
<tr class="R1"><td><div class="i_photo"> </div></td>
<td><a href="auxcpubrds-separate.jpg">auxcpubrds-separate.jpg</a>(The two auxcpucessor boards.)</td>
</tr>
<tr class="R0"><td><div class="i_timing"> </div></td>
<td><a href="timing1.jpg">timing1.jpg</a>(Timing sheet 1)</td>
</tr>
<tr class="R1"><td><div class="i_timing"> </div></td>
<td><a href="timing2.jpg">timing2.jpg</a>(Timing sheet 2)</td>
</tr></table>
<h3><a name="board2" id="board2">Version: 1.0B</a></h3>
<p>Status: prototype with bugs</p>
<h4>Notes</h4><table class="notes"><tr><td class="noteicon"><div class="i_warn"> </div></td>
<td><p>
			The following bugs have been found:
			<ul>
			<li>The address selection goes to $e8d*/e8f* instead of $e85*/e87*</li>
			<li>The /MEMSEL and /IOSEL lines on IC1 are messed up.</li>
			<li>There is no interrupt generation feature.</li>
			</ul>
			It seems that over checking and fixing the timing generation I forgot to check
			the more trivial parts. The complicated parts all worked out of the box... :-)
			</p>
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			This board has been tested in a test 
			setup. The driver above contains the test
			programs.
		</td></tr>
<tr><td class="noteicon"><div class="i_msg"> </div></td>
<td>
			The board itself consists of two boards, where
			the smaller one is piggy-backed on top of the
			main Euro-card-sized board. The smaller one
			is called the "addon" board.
		</td></tr>
</table><h4>Files</h4><table class="files">
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu-v1.0b-sch.png">csa_auxcpu-v1.0b-sch.png</a></td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu-v1.0b.sch">csa_auxcpu-v1.0b.sch</a></td>
</tr>
<tr class="R1"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b-sch.png">csa_auxcpu_addon-v1.0b-sch.png</a>(The addon board)</td>
</tr>
<tr class="R0"><td><div class="i_schem"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b.sch">csa_auxcpu_addon-v1.0b.sch</a>(The addon board)</td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu-v1.0b-brd.png">csa_auxcpu-v1.0b-brd.png</a></td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu-v1.0b.brd">csa_auxcpu-v1.0b.brd</a></td>
</tr>
<tr class="R1"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b-brd.png">csa_auxcpu_addon-v1.0b-brd.png</a>(The addon board)</td>
</tr>
<tr class="R0"><td><div class="i_layout"> </div></td>
<td><a href="csa_auxcpu_addon-v1.0b.brd">csa_auxcpu_addon-v1.0b.brd</a>(The addon board)</td>
</tr>
<tr class="R1"><td><div class="i_photo"> </div></td>
<td><a href="auxcpubrds.jpg">auxcpubrds.jpg</a>(The complete auxcpu board.)</td>
</tr>
<tr class="R0"><td><div class="i_photo"> </div></td>
<td><a href="auxcpubrds-separate.jpg">auxcpubrds-separate.jpg</a>(The two auxcpucessor boards.)</td>
</tr></table>
</div></div><div id="contentfooter"><p>Last modified: 2006-12-30.</p>
<p>Return to <a href="../../index.html">Homepage</a></p>

</div></div></div><div id="footer"> </div></div><script type="text/javascript">myUp="../../";</script><script type="text/javascript" src="../../scripts-all.js"></script></body></html>
