<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="author" content="André  Fachat">

<meta name="description" content="Commodore IEEE488 harddisk descriptions">
<meta name="keywords" content="Commodore IEEE488 harddisk D9060 D9090">
<link rev="made" href="mailto:afachat@gmx.de">
<LINK REL="stylesheet" TITLE="Default" TYPE="text/css" HREF="../../stylenew.css">
<LINK REL="alternate stylesheet" TITLE="Advanced" TYPE="text/css" HREF="../../advanced.css">
<script src="../../jquery-1.4.2.min.js"></script><script src="../../myscripts.js"></script><script>myUp="../../";</script>

<title>Commodore IEEE488 Harddisk information</title>
</head>
<body><div id="mainbox">
<div id="leftcol">
<DIV class="top" ID="menu">
<a class="m_homepage" href="../../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><img src="../../imgs/dir.png"/><a href="../../petindex/index.html">CBM PETindex</a>
<ul class="menu1" >
<li class="separator">General Info</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../gallery/index.html">PET gallery</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../versions.html">PET versions</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../boards.html">Board versions</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../pinouts.html">Connectors</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../keyboards.html">Keyboards</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../extensions.html">Extensions</a></li>
<li class="separator">Specials</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../superpet.html">SuperPET MMF9000</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../8x96.html">The 8096 and 8296 models</a></li>
<li class="separator">Peripherals</li>
<li class="dir" id="m_petindex_drives"><img src="../../imgs/dir.png"/><a href="../drives/index.html">Disk drives</a>
<ul class="menu2" >
<li class="file"><img src="../../imgs/file.png"/><a href="arch/index.html">Drive architecture</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="gallery/index.html">Drive gallery</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="roms/index.html">DOS ROMs</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="progs/index.html">Drive utilities</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="drives.html">Drives list</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="harddisk.html">Harddisk info</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="writegap.html">Write gap info</a></li>
</ul>
</li>
<li class="separator">Programming</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../progmod.html">Hardware programming</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../roms.html">ROM descriptions</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../crtc.html">CRTC operation</a></li>
<li class="separator">Quirks</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../poke.html">Killer poke</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../repairs.html">Repairing the PET</a></li>
<li class="separator">Links</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../hw.html">Hardware projects</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../sw.html">Software projects</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../emus.html">PET emulators</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../transfer.html">File transfers</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../links.html">Links</a></li>
</ul>
</li>
<li class="dir" id="m_cbmhw"><img src="../../imgs/dir.png"/><a href="../../cbmhw/index.html">CBM hardware and mods</a>
</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_csa"><img src="../../imgs/dir.png"/><a href="../../csa/index.html">CS/A65 Caspaer and Gecko computer</a>
</li>
<li class="dir" id="m_hwinfo"><img src="../../imgs/dir.png"/><a href="../../hwinfo/index.html">ICs and Standards Info</a>
</li>
<li class="dir" id="m_mischw"><img src="../../imgs/dir.png"/><a href="../../mischw/index.html">Other hardware (e.g. tools)</a>
</li>
<li class="separator">Software</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../osa/index.html">GeckOS operating system</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../lib6502/index.html">Lib6502 standard</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../o65/index.html">O65 file format</a>
</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><img src="../../imgs/dir.png"/><a href="../../icapos/index.html">Computer/OS Architecture</a>
</li>
<li class="dir" id="m_icaphw"><img src="../../imgs/dir.png"/><a href="../../icaphw/index.html">6502 Hardware Bits</a>
</li>
<li class="separator">Misc</li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../contact.html">Contact</a></li>
<li class="file"><img src="../../imgs/file.png"/><a href="../../sneak.html">Sneak preview</a></li>
</ul>

</DIV>
		<div class="top" id="browser">
			Site has been tested with Firefox 3.6, IE6, IE8, Opera 10 and Google Chrome 5 on Windows XP, as well as Firefox 3.5, Google Chrome 5 and konqueror 4.3.5 on (SuSE) Linux 11.2
		</div>
</div>
<div id="rightcol">
<div class="top" id="google"><form method="get" action="http://www.google.com/search">
<input type="text" name="q" size="20" maxlength="255" value=""><input type="submit" value="Search my site"> (Google)
	                        <input type="hidden" name="sitesearch" value="www.6502.org/users/andre">
</form></div>
<div class="top" id="twitter">
		            Follow my 8-bit tweets on
		            <a href="http://search.twitter.com/search?q=&amp;ands=&amp;phrase=&amp;ors=&amp;nots=&amp;tag=8bit&amp;lang=all&amp;from=afachat&amp;to=&amp;ref=&amp;near=&amp;within=15&amp;units=mi&amp;since=&amp;until=&amp;rpp=15"><img src="http://twitter-badges.s3.amazonaws.com/twitter-b.png" alt="twitter"></a>
</div>
<div class="top" id="forum">
<p>Discuss my site on <a href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p>
<p>(Forum registration required to post)</p>
</div>
</div>
<div id="midcol">
<DIV class="top" ID="breadcrumbs">
<a href="../../index.html">Homepage</a>
&gt;&gt; <a href="../index.html">CBM PETindex</a>&gt;&gt;  <a href="index.html">Disk drives
</a>&gt;&gt;  Harddisk info</DIV>
<DIV class="top" ID="content">
<h1>Commodore IEEE488 Harddisk information</h1>
<p class="copyright">(C)
- André  Fachat</p> 
<div class="overview">
<p>
	This page has information about the Commodore harddisk drives
	D9090 and D9060.
	</p>
<p>Note: this is a work in progress!</p>
  </div>
<h3>News:</h3>
<ul class="news"><li>
<small>2010-01-04</small>
	Started this page
    </li></ul>
<DIV ID="toc">
<H2>Table of content</H2>
<dir>
<li><a href="#general">General Information</a></li>
<li><a href="#hw">Hardware</a></li>
<dir>
<li><a href="#replace">Drive replacement</a></li>
<li><a href="#sasireplace">Drive replacement II</a></li>
</dir>
<li><a href="#links">Links</a></li>
<dir>
<li><a href="#cbm">D9060/D9090</a></li>
<li><a href="#st506">ST506 etc</a></li>
</dir>
</dir>
</DIV>
<h2><a name="general">General Information</a></h2>
<p><p>
The Commodore hard disk drives were available in two versions, the D9060 with 5 MByte and the D9090 with 7.5 MByte.
The controller hardware of both drives were basically identical, but the actual disk drives were different. The smaller
drives have a TM602S drive with 2 platters, while the larger drives have a TM603S drive with 3 platters.
    </p><p>
The DOS used is version 3.0 that supports relative files as large as the disk, but still no subdirectories or partitions.
    </p></p>
<ul><li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/drives/old/9090/index.html" target="_blank" class="extlink">DOS images and source code on the CBM archive</a> </li></ul>
<h2><a name="hw">Hardware</a></h2>
<p><p>
	The harddisks have a very special hardware. As a disk drive the more or less 'standard' ST-506 interface disks are used.
	But these disks are not accessed by the normal disk controller. Instead there is a hard disk controller in between as can
	be seen in the image.
	</p><p><a href="arch/hdarch.png"><img width="400px" src="arch/hdarch.png"></a></p><p>
	The 'DOS Board' still has the very same architecture as the other IEEE488 disk drives: One CPU is used for the DOS,
	handling the IEEE488 communication, and a second(!) 6502 is used to talk to the disk controller:
	<pre>
		IEEE488 ---&gt; DOS 6502 ---&gt;  shared memory ---&gt; controller 6502 ---&gt; SASI interface ---&gt; disk controller ---&gt; ST-506 interface ---&gt; drive
	</pre>
    </p></p>
<H3><a name="replace">Drive replacement</a></H3>
<p><p>As the old drives are sensitive to mechanical damage, for example there is no auto-parking etc, there is an idea to 
	replace the original disk drive with a newer one. There are catches, though. Ethan Diks on the cbm-hackers mailing list
	about someone asking to replace the disk with an Atari Megafile disk:
	<pre>
It is not enough to match merely the number of platters.  Back in the
days of 10MB and 20MB disks, you had to match the number of platters,
the number of cylinders (the disc can have more cylinders than the
controller expects, of course), and two now-mysterious-and-forgotten
parameters - reduced write current and write precompensation.  Without
going into the details of RWC and Precomp (as they were often
described at the time), they are numbers that relate to what cylinder
the drive needs the controller to change how it writes to the platters
(since that is all analog and entirely controlled by the controller,
unlike IDE and embedded SCSI drives).  Even though the Seagate ST506
and the Tandon TM602S have the same number of heads and about
(exactly?) the same number of cylinders, you can *not* replace one for
the other - their RWC and Precomp numbers are different and not
mutually compatible.  There are also different, shall we call it,
"versions" of the ST506 and ST412 ("MFM") interface implementation -
not vastly different, but different enough that it matters when trying
to put a newer drive on an older controller and vice versa.

Now... *if* the Atari Megafile you mentioned happens to have a drive
that will sufficiently imitate the TM602S (it will if, for example, it
has a Seagate ST225 inside), then that will work.  Without knowing the
drive model in the Megafile, it's impossible to determine in advance
if is a good substitute or not.  Other drives will probably work, but
I'd urge you to go find the specific numbers from a TM602S and check
them against what you'd like to try as a replacement drive (the TM603S
is identical except it has 6 heads instead of 4).  Of course, any of
these parameters could be changed with enough understanding about the
internals of the D90x0 drives, but I do not believe that there is that
depth of knowledge anywhere at present.  With enough research and
experimentation, many more adaptations and modern substitutions can be
tried.

I don't want to discourage you from trying new things, but I do want
to caution you that drives from those days are much more complicated
to set up to work reliably than drives are now.
	</pre>
	What we learn from this is that the Seagate ST225 is a viable 
	replacement for the TM602S (5 MByte) drives in terms of the other physical
	parameters.
	</p></p>
<H3><a name="sasireplace">Drive replacement II</a></H3>
<p><p>As the old drives are becoming more and more difficult to 
	obtain, another idea has appeared: replacing the disk controller
	(behind the SASI interface) with a controller like a PIC or Atmel
	controller and emulating a SASI drive. 
	</p><p>SASI is a predecessor to
	SCSI, only little information is available though.
	Also a detailled analysis of the controller 6502 ROM must be
	performed to find out what SASI commands are actually sent
	to the controller.
    	</p></p>
<h2><a name="links">Links</a></h2>
<H3><a name="cbm">D9060/D9090</a></H3>
<ul>
<li>
<a href="http://vintagecomputer.net/browse_thread.cfm?id=298" target="_blank" class="extlink">Example of diagnosing a D9090</a> </li>
<li>
<a href="http://vintagecomputer.net/browse_thread_record.cfm?id=35&amp;tid=1" target="_blank" class="extlink">Replacing the original drive with an ST225</a> </li>
<li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/schematics/drives/old/9090/23.gif" target="_blank" class="extlink">Diagnostic blink codes in the CBM archive</a> </li>
<li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/schematics/drives/old/9090/index.html" target="_blank" class="extlink">Schematics in the CBM archive</a> </li>
<li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/drives/old/9090/index.html" target="_blank" class="extlink">DOS images and source code on the CBM archive</a> </li>
<li>
<a href="http://www.bombjack.org/commodore/commodore/Disk_System_User_Reference_Guide.pdf" target="_blank" class="extlink">Disk System User Reference Guide (pdf)</a> </li>
</ul>
<H3><a name="st506">ST506 etc</a></H3>
<ul>
<li>
<a href="http://en.wikipedia.org/wiki/ST506" target="_blank" class="extlink">Wikipedia on ST-506</a> </li>
<li>
<a href="http://webpages.charter.net/dperr/diskguid.txt" target="_blank" class="extlink">Disk interface and encoding information</a> </li>
<li>
<a href="http://nemesis.lonestar.org/computers/tandy/hardware/storage/mfm.html" target="_blank" class="extlink">Tandy MFM Hard Disk Drive Reference</a> </li>
<li>
<a href="http://www.faculty.iu-bremen.de/birk/lectures/PC101-2003/11magmass/MASS%20STORAGE%20MAGNETIC%20MEDIA/Hard%20disk%20controllers%20%26%20interface.htm" target="_blank" class="extlink">Disk interface and encoding information</a> </li>
</ul>
<h2>Disclaimer</h2>
<p>
All Copyrights are acknowledged.
The information here is provided under the terms of the
GNU Public License version 2 unless noted otherwise.
  </p>
<hr>
<p>Return to <a href="../../index.html">Homepage</a></p>

  </DIV>
</div>
</div></body>
</html> 

