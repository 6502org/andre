<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta name="author" content="Andr&eacute;  Fachat">

<meta name="description" content="Commodore IEEE488 harddisk descriptions">
<meta name="keywords" content="Commodore IEEE488 harddisk D9060 D9090">
<link rev="made" href="mailto:afachat@gmx.de">
<link rel="stylesheet" title="Default" type="text/css" href="../../style2.css"><link rel="alternate stylesheet" title="Advanced" type="text/css" href="../../advanced.css">
<title>Commodore IEEE488 Harddisk information</title></head>
<body><div id="mainbox"><a name="top"></a><div id="topsearch"><form method="get" action="http://www.google.com/search" target="_blank"><input alt="search" name="q" size="10" maxlength="255" type="text"><input class="advbutton" value="Search site" type="submit"><div id="srchprov">(by Google)</div><input name="sitesearch" value="www.6502.org/users/andre" type="hidden"></form><div id="topfind"></div></div><div id="menubox">



<div id="menu1">
<div id="twist1" class="twisty"></div>
<div class="hdrtxt"><a href="../../index.html">Home&nbsp;&gt;</a></div>
<ul class="nav1">
<li>
<ul class="nav2">
<li class="navhdr"><a href="../../index.html">Home</a></li>
<li><a href="../../contact.html">Contact</a></li>
<li><a href="../../design.html">Web design</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Hardware</span></li>
<li><ul class="nav2" >
<li><a href="../../65k/index.html">The 65k Project</a>
</li>
<li><a href="../../csa/index.html">CS/A65</a>
</li>
<li><a href="../../cbmhw/index.html">CBM mods</a>
</li>
<li><a href="../../spi65b/index.html">SPI65B</a>
</li>
<li><a href="../../mischw/index.html">Other hardware</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Software</span></li>
<li><ul class="nav2" >
<li><a href="../../osa/index.html">GeckOS</a>
</li>
<li><a href="../../lib6502/index.html">lib6502 </a>
</li>
<li><a href="../../o65/index.html">o65</a>
</li>
<li><a href="../../usb65/index.html">usb65</a>
</li>
<li><a href="../../xd2031/index.html">XD2031</a>
</li>
<li><a href="../../misc/index.html">Misc</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Library</span></li>
<li><ul class="nav2" >
<li><a href="../../petindex/index.html">PETindex</a>
</li>
<li><a href="../../adv65/index.html">Advanced 6502</a>
</li>
<li><a href="../../hwinfo/index.html">ICs and Standards</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Knowledge Bits</span></li>
<li><ul class="nav2" >
<li><a href="../../icapos/index.html">Computer/OS Architecture</a>
</li>
<li><a href="../../icaphw/index.html">6502 Hardware Bits</a>
</li>
</ul>
<div class="nend2"></div>
</li>
<div class="nend1"></div>
</ul>
</div>
<div id="menu2">
<div id="twist2" class="twisty"></div>
<div class="hdrtxt"><a href="../index.html">PETindex&nbsp;&gt;</a></div>
<ul class="nav1">
<li>
<ul class="nav2">
<li class="navhdr"><a href="../index.html">PETindex</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>General Info</span></li>
<li><ul class="nav2" >
<li><a href="../gallery/index.html">PET gallery</a>
</li>
<li><a href="../versions.html">PET versions</a></li>
<li><a href="../boards.html">Boards and schematics</a></li>
<li><a href="../pinouts.html">Connectors</a></li>
<li><a href="../keyboards.html">Keyboards</a></li>
<li><a href="../extensions.html">Hardware Extensions</a></li>
<li><a href="../lang.html">Programming Languages</a></li>
<li><a href="../open.html">Open questions</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Specials</span></li>
<li><ul class="nav2" >
<li><a href="../superpet.html">SuperPET MMF9000</a></li>
<li><a href="../8x96.html">The 8096 and 8296 models</a></li>
<li><a href="../8032sk.html">The 8032-SK</a></li>
<li><a href="../internat.html">Internationalization</a></li>
<div class="nend2"></div>
</ul>
</li>
<li><span>Peripherals</span></li>
<li><ul class="nav2" >
<li><a href="../drives/index.html">Disk drives</a>
</li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Programming</span></li>
<li><ul class="nav2" >
<li><a href="../progmod.html">Hardware programming</a></li>
<li><a href="../roms.html">ROM descriptions</a></li>
<li><a href="../crtc.html">CRTC operation</a></li>
<div class="nend2"></div>
</ul>
</li>
<li><span>Quirks</span></li>
<li><ul class="nav2" >
<li><a href="../poke/index.html">Killer poke</a>
</li>
<li><a href="../repairs.html">Repairing the PET</a></li>
<div class="nend2"></div>
</ul>
</li>
<div class="nend1"></div>
</ul>
<ul class="nav1" >
<li><span>Links</span></li>
<li><ul class="nav2" >
<li><a href="../hw.html">Hardware projects</a></li>
<li><a href="../sw.html">Software projects</a></li>
<li><a href="../emus.html">PET emulators</a></li>
<li><a href="../transfer.html">File transfers</a></li>
<li><a href="../links.html">Links</a></li>
</ul>
<div class="nend2"></div>
</li>
<div class="nend1"></div>
</ul>
</div>
<div id="menu3">
<div id="twist3" class="twisty"></div>
<div class="hdrtxt"><a href="index.html">Disk Drives&nbsp;&gt;</a></div>
<ul class="nav1">
<li>
<ul class="nav2">
<li class="navhdr"><a href="index.html">Disk Drives</a></li>
<li><a href="arch/index.html">Drive architecture</a>
</li>
<li><a href="gallery/index.html">Drive gallery</a>
</li>
<li><a href="roms/index.html">DOS ROMs</a>
</li>
<li><a href="progs/index.html">Drive utilities</a>
</li>
<li><a href="drives.html">Drives list</a></li>
<li><a href="harddisk.html">Harddisk info</a></li>
<li><a href="writegap.html">Write gap info</a></li>
</ul>
<div class="nend2"></div>
</li>
<div class="nend1"></div>
</ul>
</div>
	</div><div id="midcol"><div class="top" id="content"><div id="minmax"></div>

<h1>Commodore IEEE488 Harddisk information</h1><p class="copyright">(C)
- Andr&eacute;  Fachat</p> 
<div class="overview"><p>
	This page has information about the Commodore harddisk drives
	D9090 and D9060.
	</p><p>Note: this is a work in progress!</p>
  </div><div class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2><a name="news">News:</a></h2></div><div class="h2c"><ul class="news"><li><div>&nbsp;</div><small>2010-01-04</small>
	Started this page
    </li></ul></div></div><div id="toc" class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2>Table of content</h2></div><div class="h2c"><ul><li><a href="#general">General Information</a></li><li><a href="#hw">Hardware</a></li><li style="list-style-type:none;"><ul><li><a href="#replace">Drive replacement</a></li><li><a href="#sasireplace">Drive replacement II</a></li></ul></li><li><a href="#links">Links</a></li><li style="list-style-type:none;"><ul><li><a href="#cbm">D9060/D9090</a></li><li><a href="#st506">ST506 etc</a></li></ul></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2><a name="general">General Information</a></h2></div><div class="h2c"><p>
The Commodore hard disk drives were available in two versions, the D9060 with 5 MByte and the D9090 with 7.5 MByte.
The controller hardware of both drives were basically identical, but the actual disk drives were different. The smaller
drives have a TM602S drive with 2 platters, while the larger drives have a TM603S drive with 3 platters.
    </p><p>
The DOS used is version 3.0 that supports relative files as large as the disk, but still no subdirectories or partitions.
    </p><ul><li><a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/drives/old/9090/index.html" target="_blank" class="extlink">DOS images and source code on the CBM archive</a> </li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2><a name="hw">Hardware</a></h2></div><div class="h2c"><p>
	The harddisks have a very special hardware. As a disk drive the more or less 'standard' ST-506 interface disks are used.
	But these disks are not accessed by the normal disk controller. Instead there is a hard disk controller in between as can
	be seen in the image.
	</p><p><a href="arch/hdarch.png"><img width="400px" src="arch/hdarch.png"></a></p><p>
	The 'DOS Board' still has the very same architecture as the other IEEE488 disk drives: One CPU is used for the DOS,
	handling the IEEE488 communication, and a second(!) 6502 is used to talk to the disk controller:
	<pre>
		IEEE488 ---&gt; DOS 6502 ---&gt;  shared memory ---&gt; controller 6502 ---&gt; SASI interface ---&gt; disk controller ---&gt; ST-506 interface ---&gt; drive
	</pre>
    </p><h3><a name="replace">Drive replacement</a></h3><p>As the old drives are sensitive to mechanical damage, for example there is no auto-parking etc, there is an idea to 
	replace the original disk drive with a newer one. There are catches, though. Ethan Diks on the cbm-hackers mailing list
	about someone asking to replace the disk with an Atari Megafile disk:
	<pre>
It is not enough to match merely the number of platters.  Back in the
days of 10MB and 20MB disks, you had to match the number of platters,
the number of cylinders (the disc can have more cylinders than the
controller expects, of course), and two now-mysterious-and-forgotten
parameters - reduced write current and write precompensation.  Without
going into the details of RWC and Precomp (as they were often
described at the time), they are numbers that relate to what cylinder
the drive needs the controller to change how it writes to the platters
(since that is all analog and entirely controlled by the controller,
unlike IDE and embedded SCSI drives).  Even though the Seagate ST506
and the Tandon TM602S have the same number of heads and about
(exactly?) the same number of cylinders, you can *not* replace one for
the other - their RWC and Precomp numbers are different and not
mutually compatible.  There are also different, shall we call it,
"versions" of the ST506 and ST412 ("MFM") interface implementation -
not vastly different, but different enough that it matters when trying
to put a newer drive on an older controller and vice versa.

Now... *if* the Atari Megafile you mentioned happens to have a drive
that will sufficiently imitate the TM602S (it will if, for example, it
has a Seagate ST225 inside), then that will work.  Without knowing the
drive model in the Megafile, it's impossible to determine in advance
if is a good substitute or not.  Other drives will probably work, but
I'd urge you to go find the specific numbers from a TM602S and check
them against what you'd like to try as a replacement drive (the TM603S
is identical except it has 6 heads instead of 4).  Of course, any of
these parameters could be changed with enough understanding about the
internals of the D90x0 drives, but I do not believe that there is that
depth of knowledge anywhere at present.  With enough research and
experimentation, many more adaptations and modern substitutions can be
tried.

I don't want to discourage you from trying new things, but I do want
to caution you that drives from those days are much more complicated
to set up to work reliably than drives are now.
	</pre>
	What we learn from this is that the Seagate ST225 is a viable 
	replacement for the TM602S (5 MByte) drives in terms of the other physical
	parameters.
	</p><h3><a name="sasireplace">Drive replacement II</a></h3><p>As the old drives are becoming more and more difficult to 
	obtain, another idea has appeared: replacing the disk controller
	(behind the SASI interface) with a controller like a PIC or Atmel
	controller and emulating a SASI drive. 
	</p><p>SASI is a predecessor to
	SCSI, only little information is available though.
	Also a detailled analysis of the controller 6502 ROM must be
	performed to find out what SASI commands are actually sent
	to the controller.
    	</p></div></div><div class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2><a name="links">Links</a></h2></div><div class="h2c"><h3><a name="cbm">D9060/D9090</a></h3><ul><li><a href="http://vintagecomputer.net/browse_thread.cfm?id=298" target="_blank" class="extlink">Example of diagnosing a D9090</a> </li><li><a href="http://vintagecomputer.net/browse_thread_record.cfm?id=35&amp;tid=1" target="_blank" class="extlink">Replacing the original drive with an ST225</a> </li><li><a href="http://www.zimmers.net/anonftp/pub/cbm/schematics/drives/old/9090/23.gif" target="_blank" class="extlink">Diagnostic blink codes in the CBM archive</a> </li><li><a href="http://www.zimmers.net/anonftp/pub/cbm/schematics/drives/old/9090/index.html" target="_blank" class="extlink">Schematics in the CBM archive</a> </li><li><a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/drives/old/9090/index.html" target="_blank" class="extlink">DOS images and source code on the CBM archive</a> </li><li><a href="http://www.bombjack.org/commodore/commodore/Disk_System_User_Reference_Guide.pdf" target="_blank" class="extlink">Disk System User Reference Guide (pdf)</a> </li><li><a href="http://en.wikipedia.org/wiki/User:Suenarmy" target="_blank" class="extlink">Unpublished page on wikipedia...</a> </li></ul><h3><a name="st506">ST506 etc</a></h3><ul><li><a href="http://en.wikipedia.org/wiki/ST506" target="_blank" class="extlink">Wikipedia on ST-506</a> </li><li><a href="http://webpages.charter.net/dperr/diskguid.txt" target="_blank" class="extlink">Disk interface and encoding information</a> </li><li><a href="http://nemesis.lonestar.org/computers/tandy/hardware/storage/mfm.html" target="_blank" class="extlink">Tandy MFM Hard Disk Drive Reference</a> </li><li><a href="http://www.faculty.iu-bremen.de/birk/lectures/PC101-2003/11magmass/MASS%20STORAGE%20MAGNETIC%20MEDIA/Hard%20disk%20controllers%20%26%20interface.htm" target="_blank" class="extlink">Disk interface and encoding information</a> </li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t">&nbsp;</div><h2>Disclaimer</h2></div><div class="h2c">
All Copyrights are acknowledged.
The information here is provided under the terms of the
GNU Public License version 2 unless noted otherwise.
  </div></div><hr>
<p>Return to <a href="../../index.html">Homepage</a></p>

  </div></div><div id="rightcol"><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow my 8-bit tweets on<br><a class="extlink" target="_blank" href="https://twitter.com/#!/search/realtime/afachat%20%238bit">Twitter</a><br> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">Hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../../cbmhw/ryofat40/index.html">Commodore PET replica</a></p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../../adv65/pet816/index.html">10&nbsp;MHz 6502 CPU replacement board</a></p>
<p>Interested in electronics design? Look at the <a href="../../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>
<p>Want 64bit? - pimp the 6502 with the <a href="../../65k/index.html">65k processor design!</a></p>

		</div></div></div><div id="footer">&nbsp;</div></div><script type="text/javascript">myUp="../../";</script><script type="text/javascript" src="../../scripts2-all.js"></script></body></html> 
