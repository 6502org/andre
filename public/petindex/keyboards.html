<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="Andr&#xE9;  Fachat" />

<meta name="description" content="" />
<meta name="keywords" content="" />
<link rev="made" href="mailto:afachat@gmx.de" />
<link rel="stylesheet" title="Default" type="text/css" href="../style-min.css" /><link rel="alternate stylesheet" title="Advanced" type="text/css" href="../advanced.css" />
<title>PET index - keyboards</title></head>
<body><div id="mainbox"><a name="top" id="top"></a><div id="leftcol"><div id="menu" class="top"><div class="tophead">navigate</div><div id="filter"><form action="#"><table id="filterbox"><tr><td><input alt="menu filter" size="8" name="filter" value="filter" type="text" /></td><td><div id="cancel" class="i_cancel"> </div></td></tr></table><table id="expcol"><tr><td><div id="expand" class="i_expand"> </div></td><td><div id="collapse" class="i_collapse"> </div></td></tr></table></form></div>
<div id="mtree">
<a id="m_homepage" href="../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><div class="i_dir">&nbsp;</div><a href="../petindex/index.html">CBM PETindex</a>
<ul class="menu1" >
<li class="separator">General Info</li>
<li><div class="i_file">&nbsp;</div><a href="gallery/index.html">PET gallery</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="versions.html">PET versions</a></li>
<li><div class="i_file">&nbsp;</div><a href="boards.html">Board versions</a></li>
<li><div class="i_file">&nbsp;</div><a href="pinouts.html">Connectors</a></li>
<li><div class="i_file">&nbsp;</div><a href="keyboards.html" class="mcurrent">Keyboards</a></li>
<li><div class="i_file">&nbsp;</div><a href="extensions.html">Extensions</a></li>
<li><div class="i_file">&nbsp;</div><a href="open.html">Open questions</a></li>
<li class="separator">Specials</li>
<li><div class="i_file">&nbsp;</div><a href="superpet.html">SuperPET MMF9000</a></li>
<li><div class="i_file">&nbsp;</div><a href="8x96.html">The 8096 and 8296 models</a></li>
<li class="separator">Peripherals</li>
<li class="dir" id="m_petindex_drives"><div class="i_dir">&nbsp;</div><a href="drives/index.html">Disk drives</a>
</li>
<li class="separator">Programming</li>
<li><div class="i_file">&nbsp;</div><a href="progmod.html">Hardware programming</a></li>
<li><div class="i_file">&nbsp;</div><a href="roms.html">ROM descriptions</a></li>
<li><div class="i_file">&nbsp;</div><a href="crtc.html">CRTC operation</a></li>
<li class="separator">Quirks</li>
<li class="dir" id="m_petindex_poke"><div class="i_dir">&nbsp;</div><a href="poke/index.html">Killer poke</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="repairs.html">Repairing the PET</a></li>
<li class="separator">Links</li>
<li><div class="i_file">&nbsp;</div><a href="hw.html">Hardware projects</a></li>
<li><div class="i_file">&nbsp;</div><a href="sw.html">Software projects</a></li>
<li><div class="i_file">&nbsp;</div><a href="emus.html">PET emulators</a></li>
<li><div class="i_file">&nbsp;</div><a href="transfer.html">File transfers</a></li>
<li><div class="i_file">&nbsp;</div><a href="links.html">Links</a></li>
</ul>
</li>
<li class="dir" id="m_cbmhw"><div class="i_dir">&nbsp;</div><a href="../cbmhw/index.html">CBM hardware and mods</a>
</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_65k"><div class="i_dir">&nbsp;</div><a href="../65k/index.html">The 65k Project</a>
</li>
<li class="dir" id="m_csa"><div class="i_dir">&nbsp;</div><a href="../csa/index.html">CS/A65 Caspaer and Gecko computer</a>
</li>
<li class="dir" id="m_adv65"><div class="i_dir">&nbsp;</div><a href="../adv65/index.html">Advanced 6502</a>
</li>
<li class="dir" id="m_hwinfo"><div class="i_dir">&nbsp;</div><a href="../hwinfo/index.html">ICs and Standards Info</a>
</li>
<li class="dir" id="m_mischw"><div class="i_dir">&nbsp;</div><a href="../mischw/index.html">Other hardware (e.g. tools)</a>
</li>
<li class="separator">Software</li>
<li><div class="i_file">&nbsp;</div><a href="../osa/index.html">GeckOS operating system</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../lib6502/index.html">Lib6502 standard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../o65/index.html">O65 file format</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><div class="i_dir">&nbsp;</div><a href="../icapos/index.html">Computer/OS Architecture</a>
</li>
<li class="dir" id="m_icaphw"><div class="i_dir">&nbsp;</div><a href="../icaphw/index.html">6502 Hardware Bits</a>
</li>
<li class="separator">Misc</li>
<li><div class="i_file">&nbsp;</div><a href="../contact.html">Contact</a></li>
<li><div class="i_file">&nbsp;</div><a href="../sneak.html">Sneak preview</a></li>
<li><div class="i_file">&nbsp;</div><a href="../design.html">Web design</a></li>
</ul>

</div>
		</div><div class="top" id="browser"><div class="tophead">browser</div><div>
			Site has been tested with a number of browsers and systems. Javascript required for advanced menu, but degrades gracefully without Javascript. IE6 not fully supported anymore!
			</div></div></div><div id="rightcol"><div class="top" id="google"><div class="tophead">search</div><div><form method="get" action="http://www.google.com/search" target="_blank"><input alt="search parameters" type="text" name="q" size="10" maxlength="255" value="" /><input class="advbutton" type="submit" value="Search my site" /><br />(Google, in new window)
	                        <input type="hidden" name="sitesearch" value="www.6502.org/users/andre" /></form></div></div><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow my 8-bit tweets on<br /><a target="_blank" href="http://search.twitter.com/search?q=&amp;ands=&amp;phrase=&amp;ors=&amp;nots=&amp;tag=8bit&amp;lang=all&amp;from=afachat&amp;to=&amp;ref=&amp;near=&amp;within=15&amp;units=mi&amp;since=&amp;until=&amp;rpp=15">Twitter</a><br /> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">Hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../cbmhw/ryofat40/index.html">Commodore PET replica</a></p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../adv65/pet816/index.html">10&nbsp;MHz 6502 CPU replacement board</a></p>
<p>Interested in electronics design? Look at the <a href="../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>

		</div></div></div><div id="midcol"><div class="top" id="ie6warn">
You are using an old MS Internet Explorer as browser. This version is not supported anymore. Please use a 
more modern browser, like Internet Explorer 8 or later, 
<a target="_blank" class="extlink" href="http://www.firefox.com">Firefox</a>,
<a target="_blank" class="extlink" href="http://www.google.com/chrome">Google Chrome</a>, or
<a target="_blank" class="extlink" href="http://www.opera.com">Opera</a>.
</div><div class="top" id="content"><div id="minmax"></div>
<div id="breadcrumbs">
<a href="../index.html">Homepage</a>
&gt;&gt;  <a href="index.html">CBM PETindex
</a>&gt;&gt;  Keyboards</div>
<h1>PET index - keyboards</h1><p class="copyright">(C)
1998-2010 André  Fachat</p> 
<div class="overview"><p>	The keyboard layout is sometimes a real hassle, because there are
in fact quite some different keyboards. The very first one was the
chicklet-type keyboard of the original PET. It actually represented the
keyboard scan matrix quite nicely. The graphics keyboard is a direct
descendant as it uses the same scan matrix.
</p><p>The business keyboards however have differences. The first and
most (if at all) known are the different so-called 50Hz and 60Hz models.
Those numbers relate to the power supply line frequency in Europe and
the USA resp. Because of this difference there were differences
in the video controller, but Commodore also decided to have different
keyboards. Later, however, in Europe and even Japan CBM sold nationalized CBM machines
with german or other keyboards and character sets.
Therefore I will in this document name the keyboards "chicklet", "graphics"
and "business-**", where "**" is "us", "uk", "de" etc for the different
countries.
</p>
  </div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="news" id="news">News:</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul class="news"><li><div> </div><small>2010-08-28</small>
	Added pictures of German and Japanese keyboards
    </li></ul></div></div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul><li><a href="#layout">Keyboard Layout</a></li><li><a href="#scan">Keyboard Scan</a></li><li style="list-style-type:none;"><ul><li><a href="#graph">The graphics keyboard</a></li><li><a href="#business">The business keyboard</a></li><li><a href="#hints">Hints</a></li><li><a href="#ctrl">Control Codes</a></li></ul></li><li><a href="#i18n">Internationalization</a></li><li style="list-style-type:none;"><ul><li><a href="#japan">Japan</a></li><li><a href="#japan">Germany</a></li></ul></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="layout" id="layout">Keyboard Layout</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"> <p>I now have put my worksheet of the PET keyboard layout here. It
is a graphical representation of the PET graphics and business-uk
(50Hz) keyboards, with the keycaps and the row/column number
in the scan matrix. There is a postscript file for the
<A HREF="keymap/petbusi-uk.ps.gz">UK (50Hz) business keyboard</A>
and the <A HREF="keymap/petgraph.ps.gz">Graphics keyboard</A>.
For those of you who would like to send me other mappings, please
use the unix <CODE>xfig</CODE> program and the templates in
<A HREF="keymap/petmaps.tar.gz">petmaps.tar.gz</A>.
(If displaying postscript, use A4 paper format, 29.7cm x 21cm).
</p><p>
There also is my old, hand-drawn version.
Unfortunately it is not high-quality,
but I hope it helps. It is in <A HREF="imgs/klayout.png">klayout.png</A>
(150k). You may also see if you can recognize the prints on these images (courtesy Bo Zimmermann):
</p>
<TABLE>
<TR><TD>Chicklet keyboard</TD><TD><IMG SRC="imgs/2001keyboard.gif" ALT="image of 2001 chicklet keyboard"></IMG></TD></TR>
<TR><TD><IMG SRC="imgs/4008kybd.gif" ALT="image of PET graphics keyboard (main part)"></IMG><IMG SRC="imgs/numkeypad.gif" ALT="image of PET graphics keyboard (number pad)"></IMG></TD><TD>Graphics keyboard</TD></TR>
<TR><TD>Business keyboard</TD><TD><IMG SRC="imgs/8096keyboard.gif" ALT="image of business keyboard (main part)"></IMG><IMG SRC="imgs/8096keypad.gif" ALT="image of business keyboard (number pad)"></IMG></TD></TR>
</TABLE>
    </div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="scan" id="scan">Keyboard Scan</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"> <p>How is a keyboard read by the operating system? The CPU writes the
keyboard row number into PIA1 PA 0-3, where the row number goes from
0 to 9. This is decoded into 10 select lines, each is set high unless
the keyboard row matches with it, then it is set low.
To each row line there are 8 keys attached that, if pressed, make contact
with one of the 8 bits of PIA1 PB. Those inputs are read as high if no
key is pressed (pullup resistors). Also if a key is pressed and
the corresponding row select line is not low, the input is read high.
But if a key is pressed and the row select line of that key is low,
the corresponding PB bit is read 0, indicating that the key at the
selected row and the position of the 0-bit is pressed. With 10 rows
and 8 columns you get up to 80 keys. The keyboard scan matrix
reflects this origanization.
    </p><h3><a name="graph" id="graph">The graphics keyboard</a></h3><PRE>
Graphics keyboard decoding table:

----+------------------------
row |  7  6  5  4  3  2  1  0
----+------------------------
 9  | 3D 2E FF 03 3C 20 5B 12
    |  =  . -- ^C  &lt; sp  [ ^R   ^C = STOP, ^R = Reverse on
    |
 8  | 2D 30 00 3E FF 5D 40 00
    |  -  0 rs  &gt; --  ] @  ls   rs = right shift, ls = left shift
    |
 7  | 2B 32 FF 3F 2C 4E 56 58
    |  +  2 --  ?  ,  n  v  x
    |
 6  | 33 31 0D 3B 4D 42 43 5A
    |  3  1 ^M  ;  m  b  c  z   ^M = return
    |
 5  | 2A 35 FF 3A 4B 48 46 53
    |  *  5 --  :  k  h  f  s
    |
 4  | 36 34 FF 4C 4A 47 44 41
    |  6  4 --  l  j  g  d  a
    |
 3  | 2F 38 FF 50 49 59 52 57
    |  /  8 --  p  i  y  r  w
    |
 2  | 39 37 5E 4F 55 54 45 51
    |  9  7  ^  o  u  t  e  q
    |
 1  | 14 11 FF 29 5C 27 24 22
    | ^T ^Q --  )  \  '  $  "   ^T = DEL, ^Q = cursor down
    |
 0  | 1d 13 5F 28 26 25 23 21
    | ^] ^S &lt;-  (  &amp;  %  #  !   ^] = cursor right, ^S = home
----+------------------------

The original gfx keyboard reflects the matrix perfectly:

          !  "  #  $  %  '  &amp;  \  (  )  &lt;-     ^s ^q ^] ^t
          q  w  e  r  t  y  u  i  o  p  ^       7  8  9  /
          a  s  d  f  g  h  j  k  l  : ^m       4  5  6  *
          z  x  c  v  b  n  m  ,  ;  ? ^m       1  2  3  +
         LS ^r  @  [  ]  SPACE &lt;  &gt; ^c  RS      0  .  -  =

The shift key always set the high bit, producing a graphic character.
</PRE>
	<h3><a name="business" id="business">The business keyboard</a></h3><p>This is the us and en keyboard scan matrix. The upper ones are the en
(50Hz) and the lower ones, if they differ, the us (60Hz) codes.</p>
<PRE>
The keyboard is scanned by writing the row number into the row select port
($E810), then reading the column bits ($E812). Each bit that reads 0
represents a pressed key.

; 00 = Shift
; 10 = Repeat
; 80   flags unshiftable key
; FF = No key

Business keyboard decoding table:

----+------------------------
row |  7  6  5  4  3  2  1  0
----+------------------------
 9  | 16 04 3A 03 39 36 33 DF
    | ^V --  : ^C  9  6  3 &lt;-   ^V = TAB + &lt;- + DEL, ^C = STOP,
    |                            &lt;- = left arrow
 8  | B1 2F 15 13 4D 20 58 12
    | k1  / ^U ^S  m sp  x ^R   k9 = keypad 9, ^U = RVS + A + L,
    |                           ^S = HOME, sp = space, ^R = RVS
 7  | B2 10 0F B0 2C 4E 56 5A   ^O = Z + A + L, rp = repeat
    | k2 rp ^O k0  ,  n  v  z
    |
 6  | B3 00 19 AE 2E 42 43 00
    | k3 rs ^Y k.  .  b  c ls   ^Y = left shift + TAB + I, k. = keypad .
    |                           ls = left shift, rs = right shift
 5  | B4 DB 4F 11 55 54 45 51   ^Q = cursor down
    | k4  [  o ^Q  u  t  e  q
    |    5D]
 4  | 14 50 49 DC 59 52 57 09
    | ^T  p  i  \  y  r  w ^I   ^T = DEL, ^I = TAB
    |          C0@
 3  | B6 C0 4C 0D 4A 47 44 41
    | k6  @  l ^M  j  g  d  a   ^M = return
    |    5B[
 2  | B5 3B 4B DD 48 46 53 9B
    | k5  ;  k  ]  h  f  s ^[   ^[ = ESC
    |    5C\   3B;
 1  | B9 06 DE B7 B0 37 34 31
    | k9 --  ^ k7  0  7  4  1
    |
 0  | 05 0E 1D B8 2D 38 35 32
    |  . ^N ^] k8  -  8  5  2   ^N = both shifts + 2, ^] = cursor right
----+------------------------
</PRE>
	<h3><a name="hints" id="hints">Hints</a></h3><P>
In Basic 4.0 CRTC the (PETSCII) values listed in the table below are
recorded in location 151 [this makes distinguishing between the normal 0
key and the one on the numeric keypad impossible]; in older versions (and
4.0 without CRTC) the position in the table is recorded. The position is
8 * (9 - row) + (7 - column) + 1, i.e. starting at 1, incrementing left to
right and top to bottom.
</P>
	<h3><a name="ctrl" id="ctrl">Control Codes</a></h3><PRE>
CONTROL CODES
=============

F: only on 4.0 fat-40, i.e. NOT on upgrade 4.0 roms.
8: only on 4.0 80 columns.
4B: only on 4.0 upgrade, B keyboard (maybe also on N keybd but I don't
    have a ROM to verify this)

+------+------------------------------+------------------------------------+
|ctrl- | unshifted                    | shifted (unshifted + 128)          |
+------+------------------------------+------------------------------------+
| C  3 | stop                         | load/run, dload"*/run, or dL"*/run |
| G  7 | bell                         | double bell                        |
| I  9 | tab (4B,F,8)                 | set/clear tab (4B,F,8)             |
| M 13 | return                       | fake return                        |
| N 14 | text mode (F,8)              | graphics mode (F,8)                |
| O 15 | set top of window (8)        | set bottom of window (8)           |
| P 16 | erase end of line (F)        | see note (no function)             |
| Q 17 | cursor down                  | cursor up                          |
| R 18 | reverse field on             | reverse field off                  |
| S 19 | cursor home                  | clear screen                       |
| T 20 | delete char left of cursor   | insert space at cursor             |
| U 21 | delete line (8)              | insert line (8)                    |
| V 22 | erase end of line (8)        | erase begin of line (F,8)          |
| Y 25 | scroll up (8)                | scroll down (8)                    |
| [ 26 | escape: end inst &amp; quote mode| (no function)                      |
| ] 28 | cursor right                 | cursor left                        |
|      |                              | 255 pi (converted to 94)           |
+------+------------------------------+------------------------------------+

Note: on the 4.0-40-crtc version the code for "erase end of line" is
different from the 4.0-80 code. Note that the decimal notation of the
former (16, or $10) equals the hex notation of the latter ($16, or 22).
This suggests a typo while editing the assembly source for the other
version.
</PRE><p>
Larry Anderson wrote in a mail to cbm-hackers:</p>
<PRE>
8032 control characters:

Function       CHR$    ESC/RVS     Keyboard Combination*
 BELL            7        G        [none]
 GRAPHICS      142     Shift N     both SHIFTS + "
 TEXT           14        N        [none]
 SCROLL DOWN   153     Shift Y     Left SHIFT + TAB + I
 SCROLL UP      25        Y        [none]
 SET BOTTOM    143     Shift O     Shift Z + A + L
 SET TOP        15        O        Z + A + L
 INSERT LINE   149     Shift U     Shift RVS + A + L
 DELETE  LINE   21        U        RVS + A + L
 ERASE BEGIN   150     Shift V     Shift TAB + &lt;- + DEL
 ERASE END      22        V        TAB + &lt;- + DEL
 SET/CLR TAB   137     Shift I     Shift TAB
 TAB             9        I        TAB

* Combination means press listed keys simultaneously for function.

8032 Window POKEs:
   Top - 224,(0-24)
Bottom - 225,(Top-24)
  Left - 226,(0-79)
 Right - 213,(Left-79)

</PRE>
	</div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="i18n" id="i18n">Internationalization</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>The PET was also sold in other countries. Here are some bits of information about those models:</p>
    <h3><a name="japan" id="japan">Japan</a></h3><p>The Japanese PET has a Yen symbol on the keyboard, and no pound symbol.
	But it also has some Japanese characters.
	Here are some pictures of the Japanese model (Courtesy MikeS):
	</p>
	<table>
	<tr><td>Japanese chicklet keyboard</td><td><a href="keymap/JapaneseKdbOld.jpg"><img width="300px" src="keymap/JapaneseKdbOld.jpg" /></a></td></tr>
	<tr><td>Japanese graphics keyboard</td><td><a href="keymap/JapaneseKbdNewL.JPG"><img width="300px" src="keymap/JapaneseKbdNewL.JPG" /></a></td><td><a href="keymap/JapaneseKbdNewR.JPG"><img width="100px" src="keymap/JapaneseKbdNewR.JPG" /></a></td></tr>
	<tr><td><a href="keymap/JapaneseCG.PDF">Japanese screen character ROM (PDF)</a></td></tr>
	</table>
	<h3><a name="japan" id="japan">Germany</a></h3><p>This CBM 8296 has the German umlauts.
	</p>
	<table>
	<tr><td>German business keyboard</td><td><a href="keymap/kbd_german.png"><img width="300px" src="keymap/kbd_german.png" /></a></td></tr>
	</table>
	</div></div><hr />
<p>Return to <a href="../index.html">Homepage</a></p>

  </div></div><div id="footer"> </div></div><script type="text/javascript">myUp="../";</script><script type="text/javascript" src="../scripts-all.js"></script></body></html> 

