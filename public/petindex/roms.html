<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="author" content="André  Fachat">

<meta name="description" content="Commodore PET CBM ROM descriptions">
<meta name="keywords" content="Commodore PET CBM ROM">
<link rev="made" href="mailto:afachat@gmx.de">
<LINK REL="stylesheet" TITLE="Default" TYPE="text/css" HREF="../style.css">
<LINK REL="alternate stylesheet" TITLE="Advanced" TYPE="text/css" HREF="../advanced.css">
<script src="../jquery-1.4.2.min.js"></script><script src="../myscripts.js"></script><script>myUp="../";</script>

<title>Commodore PET ROM descriptions</title>
</head>
<body>
<div id="leftcol">
<DIV class="top" ID="menu">
<a class="m_homepage" href="../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><img src="../imgs/dir.png"/><a href="../petindex/index.html">CBM PETindex</a>
<ul class="menu1" >
<li class="separator">General Info</li>
<li class="dir" id="m_petindex_gallery"><img src="../imgs/dir.png"/><a href="gallery/index.html">PET gallery</a>
</li>
<li class="file"><img src="../imgs/file.png"/> <a href="versions.html">PET versions</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="boards.html">Board versions</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="pinouts.html">Connectors</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="keyboards.html">Keyboards</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="extensions.html">Extensions</a></li>
<li class="separator">Specials</li>
<li class="file"><img src="../imgs/file.png"/> <a href="superpet.html">SuperPET MMF9000</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="8x96.html">The 8096 and 8296 models</a></li>
<li class="separator">Peripherals</li>
<li class="dir" id="m_petindex_drives"><img src="../imgs/dir.png"/><a href="drives/index.html">Disk drives</a>
</li>
<li class="separator">Programming</li>
<li class="file"><img src="../imgs/file.png"/> <a href="progmod.html">Hardware programming</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="roms.html">ROM descriptions</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="crtc.html">CRTC operation</a></li>
<li class="separator">Quirks</li>
<li class="file"><img src="../imgs/file.png"/> <a href="poke.html">Killer poke</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="repairs.html">Repairing the PET</a></li>
<li class="separator">Links</li>
<li class="file"><img src="../imgs/file.png"/> <a href="hw.html">Hardware projects</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="sw.html">Software projects</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="emus.html">PET emulators</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="transfer.html">File transfers</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="links.html">Links</a></li>
</ul>
</li>
<li class="dir" id="m_cbmhw"><img src="../imgs/dir.png"/><a href="../cbmhw/index.html">CBM hardware and mods</a>
</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_csa"><img src="../imgs/dir.png"/><a href="../csa/index.html">CS/A65 Caspaer and Gecko computer</a>
</li>
<li class="dir" id="m_hwinfo"><img src="../imgs/dir.png"/><a href="../hwinfo/index.html">ICs and Standards Info</a>
</li>
<li class="dir" id="m_mischw"><img src="../imgs/dir.png"/><a href="../mischw/index.html">Other hardware (e.g. tools)</a>
</li>
<li class="separator">Software</li>
<li class="dir" id="m_osa"><img src="../imgs/dir.png"/><a href="../osa/index.html">GeckOS operating system</a>
</li>
<li class="dir" id="m_lib6502"><img src="../imgs/dir.png"/><a href="../lib6502/index.html">Lib6502 standard</a>
</li>
<li class="dir" id="m_o65"><img src="../imgs/dir.png"/><a href="../o65/index.html">O65 file format</a>
</li>
<li class="dir" id="m_misc"><img src="../imgs/dir.png"/><a href="../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><img src="../imgs/dir.png"/><a href="../icapos/index.html">Computer/OS Architecture</a>
</li>
<li class="dir" id="m_icaphw"><img src="../imgs/dir.png"/><a href="../icaphw/index.html">6502 Hardware Bits</a>
</li>
<li class="separator">Misc</li>
<li class="file"><img src="../imgs/file.png"/> <a href="../contact.html">Contact</a></li>
<li class="file"><img src="../imgs/file.png"/> <a href="../sneak.html">Sneak preview</a></li>
</ul>

</DIV>
		<div class="top" id="browser">
			Site has been tested with Firefox 3.6, IE8 and Google Chrome 5 on Windows, as well as Firefox 3.5 and konqueror 4.3.5 on Linux
		</div>
</div>
<div id="rightcol">
<div class="top" id="google"><form method="get" action="http://www.google.com/search">
<input type="text" name="q" size="20" maxlength="255" value=""><input type="submit" value="Google Search my site"><input type="hidden" name="sitesearch" value="www.6502.org/users/andre">
</form></div>
<div class="top" id="twitter">
		            Follow my 8-bit tweets on
		            <a href="http://search.twitter.com/search?q=&amp;ands=&amp;phrase=&amp;ors=&amp;nots=&amp;tag=8bit&amp;lang=all&amp;from=afachat&amp;to=&amp;ref=&amp;near=&amp;within=15&amp;units=mi&amp;since=&amp;until=&amp;rpp=15"><img src="http://twitter-badges.s3.amazonaws.com/twitter-b.png" alt="twitter"></a>
</div>
<div class="top" id="forum"><p>Discuss my site on <a href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p></div>
</div>
<div id="midcol"><DIV class="top" ID="content">
<DIV ID="breadcrumbs">
<a href="../index.html">Homepage</a>
&gt;&gt; CBM PETindex
</DIV>
<h1>Commodore PET ROM descriptions</h1>
<p class="copyright">(C)
- André  Fachat</p> 
<div class="overview">
<p>This page describes the different ROM versions.
	There are basically two sections necessary - for the BASIC ROM version
	and for the so-called editor ROM.
	</p>
  </div>
<DIV ID="toc">
<H2>Table of content</H2>
<dir>
<li><a href="#main">Differences in Software</a></li>
<dir>
<li><a href="#orig">Original ROMs ($C000-$FFFF)</a></li>
<li><a href="#upgrade">Upgrade ROMs ($C000-$FFFF)</a></li>
<li><a href="#basic4">4.0 ROMs ($B000-$FFFF)</a></li>
</dir>
<li><a href="#editor">Editor ROM</a></li>
<li><a href="#charrom">Character ROM</a></li>
</dir>
</DIV>
<h2><a name="main">Differences in Software</a></h2>
<p>
<P>
Basically there are three different ROM versions that came with the
PET computers, the original ROMs, the upgrade ROMs and the 4.0 ROMs.
Here are some of the peculiarities of the different ROM versions.
(I wished I had more about that; see also the <A HREF="links.html#petfaq">petfaq</A>
file)</P>
<P>ROM images can be found in
<A class="extlink" HREF="http://www.zimmers.net/anonftp/pub/cbm/firmware/computers/pet/">the CBM archive</A>
</P>
<P>A reverse engineered BASIC source code for versions 1,2 and 4 can be found in the <A HREF="http://www.zimmers.net/anonftp/pub/cbm/src/pet/index.html">CBM archive</A>.</P>
    </p>
<H3><a name="orig">Original ROMs ($C000-$FFFF)</a></H3>
<p><p>
Original ROMs, from $c000, powers up <CODE>*** COMMODORE BASIC ***</CODE>.
To be found in the calculator-style keyboard machines. Horribly broken,
especially the IEEE488 did not work. The
very low level routines worked, but on top of that a lot had to be fixed.
In upper/lower case character mode (as opposed to upper case/graphics mode)
the upper and lower characters were exchanged (SHIFT for lower case).
Arrays could only be 256 elements in size.
There are a lot of other bugs...
	</p><p>
Note that these ROMs had a kind of copy protection: the BASIC PEEK function could
not read out the actual ROM values...
	</p>
	</p>
<ul><li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/computers/pet/d/rom-1.html" target="_blank" class="extlink">Original ROMs disassembly</a> </li></ul>
<H3><a name="upgrade">Upgrade ROMs ($C000-$FFFF)</a></H3>
<p><p>
	The `upgrade ROMs' were also known as 2.0 or 3.0 ROMs. Start at $c000, power
up <CODE>### COMMODORE BASIC ###</CODE>
Fix a lot of bugs and make IEEE488 work. Also adds a tiny machine monitor.
Those ROMs have most bugs fixed, although there seem to be different levels
of bug fixing (the
<A class="extlink" HREF="links.html#prodlist">products list</A>
says something about ROM versions 2.0-2.3).
Try and enter "WAIT 6502,1"...
</p>
	</p>
<H3><a name="basic4">4.0 ROMs ($B000-$FFFF)</a></H3>
<p><p>
Power up with <CODE>*** COMMODORE BASIC 4.0 ***</CODE>.
The 4.0 ROMs add the so-called DISK-BASIC with disk operation commands
(DLOAD, DSAVE, COPY, SCRATCH, DS$ for the error channel etc). The editor
ROM still differs from small screen and large screen versions (board #2 and
boards #3 and #4)...
	</p>
	</p>
<ul>
<li>
<a href="http://www.zimmers.net/anonftp/pub/cbm/firmware/computers/pet/d/petdis" target="_blank" class="extlink">4.0 ROMs disassembly</a> </li>
<li>
<a href="http://www.zimmers.net/cbmpics/cbm/PETx/petmem.txt" target="_blank" class="extlink">4.0 ROMs memory map</a> </li>
</ul>
<h2><a name="editor">Editor ROM</a></h2>
<p><p>
In addition to the BASIC (including the kernel)
there are different `editor' ROMs. Those ROMs occupy $e000-$e800
and contain (in the 4.0 ROMs) the screen handling routines. The 4.0 ROMs
can be found in machines with and without CRTC, so they had different
editor ROMs. Also the business and graphics keyboard differ in layout,
so these editor ROMs differ too. The changes for business and graphics
layout in the upgrade ROMs are in $e000-$e800 too.
Later on there were nationalized keyboard versions with additional
ROM in $e900-$efff. In fact the so-called 50Hz and 60Hz versions
have different keyboard layouts and thus different editor ROMs.
</p><p>
For keyboards please have a look at <A HREF="keyboards.html">keyboards</A>
section.
	</p></p>
<h2><a name="charrom">Character ROM</a></h2>
<p><p>
	The character ROM is the ROM that is used to produce the characters on
the screen. Therefore the scan line number (0-7) is used as address for
the ROM (A0-2), then the 7 lower bits of the byte read from the screen
memory (A3-A9), then the VIA CA2 line as switch between upper/lower
case mode and upper case/graphics mode (A10). This gives a charrom
size of 2k.
</p><P>
You will notice that the highest data bit of the character read from
the screen RAM is not yet used. It is instead directly fed to an
exclusive-OR gate to invert the pixel stream from the character shift
register. This inverts the character by hardware.
</P><p>
The newer models have another line from the CRTC to the character ROM,
namely CRTC MA13 is used as A11 for the charrom. With this line
you can switch to a completely different character set in the charrom.
I assume this is used in nationalized machines with different charsets.
</p></p>
<hr>
<p>Return to <a href="../index.html">Homepage</a></p>

  </DIV></div>
</body>
</html> 

