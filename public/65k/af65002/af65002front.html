<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="" />

<meta name="description" content="65002 documentation" />
<meta name="keywords" content="8-bit,6502,65002" />
<link rev="made" href="mailto:" />
<link rel="stylesheet" title="Default" type="text/css" href="../../style-min.css" /><link rel="alternate stylesheet" title="Advanced" type="text/css" href="../../advanced.css" />
<title>65002 Documentation</title></head>
<body><div id="mainbox"><a name="top" id="top"></a><div id="leftcol"><div id="menu" class="top"><div class="tophead">navigate</div><div id="filter"><form action="#"><table id="filterbox"><tr><td><input alt="menu filter" size="8" name="filter" value="filter" type="text" /></td><td><div id="cancel" class="i_cancel"> </div></td></tr></table><table id="expcol"><tr><td><div id="expand" class="i_expand"> </div></td><td><div id="collapse" class="i_collapse"> </div></td></tr></table></form></div>
<div id="mtree">
<a id="m_homepage" href="../../index.html">Homepage</a>
<ul class="menu0" >
<li class="separator">Commodore</li>
<li class="dir" id="m_petindex"><div class="i_dir">&nbsp;</div><a href="../../petindex/index.html">CBM PETindex</a>

</li>
<li class="dir" id="m_cbmhw"><div class="i_dir">&nbsp;</div><a href="../../cbmhw/index.html">CBM hardware and mods</a>

</li>
<li class="separator">Hardware</li>
<li class="dir" id="m_65k"><div class="i_dir">&nbsp;</div><a href="../../65k/index.html">The 65k Project</a>

<ul class="menu1" >
<li><div class="i_file">&nbsp;</div><a href="../features.html">Features</a></li>
<li class="separator">Specification</li>
<li><div class="i_file">&nbsp;</div><a href="../specsprog.html">Programming Model</a></li>
<li><div class="i_file">&nbsp;</div><a href="../future.html">Future Extensions</a></li>
<li><div class="i_link">&nbsp;</div><a href="../af65002">65002</a></li>
<li><div class="i_file">&nbsp;</div><a href="../designnotes.html">Design Notes</a></li>
<li class="separator">Tools</li>
<li><div class="i_file">&nbsp;</div><a href="../crossass.html">Cross-Assembler</a></li>
<li><div class="i_file">&nbsp;</div><a href="../nativetools.html">Native Tools</a></li>
<li class="separator">Implementation</li>
<li><div class="i_file">&nbsp;</div><a href="../arch.html">General architecture</a></li>
<li class="dir" id="m_65k_af65002"><div class="i_dir">&nbsp;</div><a href="../af65002/index.html">af65002 </a>

<ul class="menu2" >
<li class="separator">Specification</li>
<li><div class="i_file">&nbsp;</div><a href="af65002front.html" class="mcurrent">Overview</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002regs.html">Register Set</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002opstruct.html">Opcode Structure</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002admodes.html">Addressing Modes</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002prefixes.html">Prefixes</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002opcodes.html">Opcodes Overview</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002opdesc.html">Opcode Description</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002int.html">Reset, Traps and Interrupts</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002hyper.html">User- and Hypervisor Mode</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002mem.html">Memory Management</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002config.html">Configuration Registers</a></li>
<li><div class="i_file">&nbsp;</div><a href="af65002compat.html">Compatibility</a></li>
<li class="separator">Implementation</li>
<li><div class="i_file">&nbsp;</div><a href="af65002arch.html">Architecture Overview</a></li>
</ul>
</li>
<li><div class="i_file">&nbsp;</div><a href="../tests.html">Test setup</a></li>
</ul>
</li>
<li class="dir" id="m_csa"><div class="i_dir">&nbsp;</div><a href="../../csa/index.html">CS/A65 Caspaer and Gecko computer</a>

</li>
<li class="dir" id="m_adv65"><div class="i_dir">&nbsp;</div><a href="../../adv65/index.html">Advanced 6502</a>

</li>
<li class="dir" id="m_hwinfo"><div class="i_dir">&nbsp;</div><a href="../../hwinfo/index.html">ICs and Standards Info</a>

</li>
<li class="dir" id="m_mischw"><div class="i_dir">&nbsp;</div><a href="../../mischw/index.html">Other hardware (e.g. tools)</a>

</li>
<li class="separator">Software</li>
<li><div class="i_file">&nbsp;</div><a href="../../osa/index.html">GeckOS operating system</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../lib6502/index.html">Lib6502 standard</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../o65/index.html">O65 file format</a>
</li>
<li><div class="i_file">&nbsp;</div><a href="../../misc/index.html">Misc software</a>
</li>
<li class="separator">Knowledge Bits</li>
<li class="dir" id="m_icapos"><div class="i_dir">&nbsp;</div><a href="../../icapos/index.html">Computer/OS Architecture</a>

</li>
<li class="dir" id="m_icaphw"><div class="i_dir">&nbsp;</div><a href="../../icaphw/index.html">6502 Hardware Bits</a>

</li>
<li class="separator">Misc</li>
<li><div class="i_file">&nbsp;</div><a href="../../contact.html">Contact</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../sneak.html">Sneak preview</a></li>
<li><div class="i_file">&nbsp;</div><a href="../../design.html">Web design</a></li>
</ul>

</div>
		</div><div class="top" id="browser"><div class="tophead">browser</div><div>
			Site has been tested with a number of browsers and systems. Javascript required for advanced menu, but degrades gracefully without Javascript. IE6 not supported anymore!
			</div></div></div><div id="rightcol"><div class="top" id="google"><div class="tophead">search</div><div><form method="get" action="http://www.google.com/search" target="_blank"><input alt="search parameters" type="text" name="q" size="10" maxlength="255" value="" /><input class="advbutton" type="submit" value="Search my site" /><br />(Google, in new window)
	                        <input type="hidden" name="sitesearch" value="www.6502.org/users/andre" /></form></div></div><div class="top" id="share"><div class="tophead">share</div><div><div id="socialshareprivacy"></div></div></div><div class="top" id="twitter"><div class="tophead">follow</div><div>
		            Follow my 8-bit tweets on<br /><a class="extlink" target="_blank" href="https://twitter.com/#!/search/realtime/afachat%20%238bit">Twitter</a><br /> (In new window)
		</div></div><div class="top" id="forum"><div class="tophead">discuss</div><div><p>Discuss my site on <a class="extlink" target="_blank" href="http://forum.6502.org/viewtopic.php?t=956">this 6502.org forum thread</a></p><p>(Forum registration required to post)</p></div></div><div class="top" id="hot"><div class="tophead">Hot!</div><div>
<p>Dive into the retro feeling and build yourself a <a href="../../cbmhw/ryofat40/index.html">Commodore PET replica</a></p>
<p>Need more speed? Speed up your 6502 computer with this <a href="../../adv65/pet816/index.html">10&nbsp;MHz 6502 CPU replacement board</a></p>
<p>Interested in electronics design? Look at the <a href="../../icaphw/design.html">design lesson</a> I got from Bil Herd, the hardware designer of the C128</p>
<p>Want 64bit? - pimp the 6502 with the <a href="../../65k/index.html">65k processor design!</a></p>

		</div></div></div><div id="midcol"><div class="top" id="ie6warn">
You are using an old MS Internet Explorer as browser. This version is not supported anymore. Please use a 
more modern browser, like Internet Explorer 8 or later, 
<a target="_blank" class="extlink" href="http://www.firefox.com">Firefox</a>,
<a target="_blank" class="extlink" href="http://www.google.com/chrome">Google Chrome</a>, or
<a target="_blank" class="extlink" href="http://www.opera.com">Opera</a>.
</div><div class="top" id="content"><div id="minmax"></div>
<div id="breadcrumbs">
<a href="../../index.html">Homepage</a>
&gt;&gt; <a href="../index.html">The 65k Project</a>&gt;&gt;  <a href="index.html">af65002
</a>&gt;&gt;  Overview</div>
<h1>65002 Documentation</h1><div class="overview">
	<p>
	This is the reference documentation for the af65002 processor.
	</p><p>
	On the left hand menu you find the links to the various pages of the documentation.
	</p><p>
	The af65002 is an extension of the venerable 65C02 8  bit processor. It extends the 
	6502 with extra registers, wider registers, as well as a user and hypervisor mdoe, featuring
	many new opcodes to use the new features.
	</p><p>
	The 65002 is binary compatible with the 65C02 - except for minor quirks required for the
	extension (see the compatibility issues page).
	</p>
  </div><div id="toc" class="h2"><div class="h2h"><div class="h2t"> </div><h2>Table of content</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><ul><li><a href="#preface">Preface</a></li><li style="list-style-type:none;"><ul><li><a href="#lic">License</a></li><li><a href="#disc">Disclaimer</a></li><li><a href="#cont">Contributors</a></li></ul></li><li><a href="#todo">TODO</a></li><li><a href="#chg">Changes</a></li></ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="preface" id="preface">Preface</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><h3><a name="lic" id="lic">License</a></h3><p>
        This content is licensed under the Creative Commons Attribution Share-Alike license, CC-BY-SA version 3.0.
    </p><p>
        Note this "content" includes this web page, but does not include the 6502.org header
        and the left and right web page columns.  Click on the "Maximize" link to see
        the contents covered by this license.
    </p><ul><li><a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode" target="_blank" class="extlink">CC-BY-SA legal code</a> </li><li><a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank" class="extlink">CC-BY-SA license deed (short form)</a> </li></ul><h3><a name="disc" id="disc">Disclaimer</a></h3><p>
        The content comes with no warranty at all!
        There is no guarantee and no promise that this specification is correct, consistent, will actually work,
        or will ever be implemented at all.
    </p><p>
        To my understanding the techniques described here have been used by various processors for decades already.
        Still there is no guarantee that a processor according to this spec would not be covered by some patents.
    </p><p>
        Subject to change without notice!
    </p><h3><a name="cont" id="cont">Contributors</a></h3><ul>
        <li>André  Fachat - initial author: <a href="http://www.6502.org/users/andre">8bit Homepage</a></li>
    </ul></div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="todo" id="todo">TODO</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>
	Here is a list of items still to do:
    </p>
    <ul>
	<li>Clarify how the memory mapping should work of multiple matches occur</li>
	<li>Add the LCR/SCR/BCR opcodes. Add the SYS page and related opcodes</li>
    </ul>
    </div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2><a name="chg" id="chg">Changes</a></h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c"><p>This section describes the changes to the documentation:</p>
      <table border="1">
        <tr><th>Date</th><th>Author</th><th>Changes</th></tr>
        <tr><td>2010-10-23</td><td>André  Fachat</td><td>First working draft</td></tr>
        <tr><td>2010-11-04</td><td>André  Fachat</td><td>Defined the interrupt status/mask/effective
                mask register; Constrained the interrupt/trap/abort vectors to two-byte vectors;
                integrated the various extra registers into the configuration register file (for less
                opcodes necessary); add WAI, STP and FIL/FILU</td></tr>
        <tr><td>2010-12-22</td><td>André  Fachat</td><td>Added the "NF" prefix bit</td></tr>
        <tr><td>2010-12-28</td><td>André  Fachat</td><td>Moved some LSB $f opcodes to the extension page
                to add STX abs,Y and STY abs,X</td></tr>
        <tr><td>2011-01-02</td><td>André  Fachat</td><td>Moved some opcodes to achieve a more regular mapping of opcodes and addressing modes</td></tr>
        <tr><td>2011-05-01</td><td>André  Fachat</td><td><ul>
                <li>WAI becomes privileged</li>
                <li>Moved no-operand opcodes in EXT page from column $f to $8, to be more aligned with standard opcode page</li>
                <li>Added the INV opcode for the 2s-complement</li>
                <li>Moved SWP to the EXT page, reordered the prefix codes</li>
                <li>reordered the EXT column $8 and $a codes</li>
                <li>Removed the INE/INB/DEE/DEB quick opcodes, added SLX/SRX/SLY/SRY quick opcodes instead</li>
                <li>Reordered opcode column $f, so all non-prefix opcodes have addressing mode abs,X</li>
                <li>removed NOP zp/abs, moved STX abs,Y to previous NOP abs location</li>
                <li>Cleaned up duplicate opcodes for AM=1, clarified table description</li>
                <li>Changed the BSR prefix usage definition to one similar to JSR, which removes the need
                        for one of the BSR duplicate opcodes</li>
                <li>Added the EE "early extension" prefix flag</li>
                <li>reordered some EXT codes</li>
                <li>Added the stack peek opcodes PKA, PKX, PKY</li>
                <li>Added the EXT and CUT opcodes</li>
                <li>Added the Accumulator addressing modes for ADE/ADB/ADS/SBE/SBB/SBS</li>
                </ul></td></tr>
        <tr><td>2011-12-23</td><td>André  Fachat</td><td><ul>
                <li>Remove the EE prefix bit, and replace it with a second bit for the ZE extension - to allow
                        to extend with ones and with the sign. Semantics of ZE changed as well, thus renamed to LE,
                        load extend. Old ZE functionality is covered by EXT opcode</li>
                <li>Fix the description of the SLX/SLY/SRX/SRY opcodes</li>
                <li>Deprecated CLX/CLY opcodes, changed CLA to full width only</li>
                <li>Added "BIT A" variant</li>
                <li>Removed CUT, as it is the same as EXT</li>
                <li>Some small changes here and there, esp. clarifications around the interrupt handling</li>
                <li>Added the Software Compatibility section</li>
                </ul></td></tr>
        <tr><td>2011-12-31</td><td>André  Fachat</td><td><ul>
                <li>Replace manually maintained tables (std/EXT pages and addressing modes) with
                        ones generated from an XML file which will be the basis for an assembler
                        and some VHDL code generation.</li>
                <li>Added LEA/PEA with relwide addressing modes</li>
                <li>Cleared up some flag settings</li>
                <li>Add the RDR/RDL/ASR opcodes, moved a number of opcodes around in the EXT page,
                        also rearranged the QUICK page to accomodate for the new opcodes.</li>
                </ul></td></tr>
        <tr><td>2012-04-23</td><td>André  Fachat</td><td><ul>
		<li>Separated the one-pager into multiple pages and integrated into the af65002 doc build process</li>
		<li>Moved some new "abs,Y" opcodes from column F to the EXT page, to free some space for more 
			possible future expansions (prefix3 could now be $8F-$FF).</li>
                </ul></td></tr>
        <tr><td>2012-04-29</td><td>André  Fachat</td><td><ul>
		<li>Reorganized the EXT page. It's less oriented on the standard page, but much more
			regular now. </li>
		<li>Added LEA and PEA addressing modes for zp/abs indirect quad, plus
			zp/abs indirect/indexed quad modes that were all missing. </li>
		<li>Added the ADD and SUB opcodes with immediate and
			E-indirect addressing modes.</li>
		<li>Added all missing tables, plus a TODO section on this page</li>
                </ul></td></tr>
      </table>
    </div></div><div class="h2"><div class="h2h"><div class="h2t"> </div><h2>Disclaimer</h2><div class="toplink"><a href="#top">Top</a></div></div><div class="h2c">
All Copyrights are acknowledged.
The information here is provided under the terms as described
in <a href="af65002front.html#lic">the license section</a>.
    </div></div><hr />
Last updated 2012-04-23.
  </div></div><div id="footer"> </div></div><script type="text/javascript">myUp="../../";</script><script type="text/javascript" src="../../scripts-all.js"></script><script type="text/javascript" src="../../jquery.socialshareprivacy.js"></script><script type="text/javascript">
          jQuery(document).ready(function($){
                  if($('#socialshareprivacy').length != 0){
                            $('#socialshareprivacy').socialSharePrivacy();
                  }
          });
  </script></body></html> 

